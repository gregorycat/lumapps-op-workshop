{"ast":null,"code":"import { AspectRatio, Size, Theme } from './components.js';\nimport { f as _slicedToArray, i as _toConsumableArray, c as _objectSpread2, g as getRootClassName, a as _objectWithoutProperties, d as classnames, h as handleBasicClasses, b as _extends } from './getRootClassName.js';\nimport React, { useRef, useEffect, useState, useMemo, useLayoutEffect, useCallback, forwardRef } from 'react';\nimport { r as mdiImageBrokenVariant } from './mdi.js';\nimport { W as WINDOW } from './constants.js';\nimport { m as mergeRefs } from './mergeRefs.js';\nimport { I as Icon } from './Icon2.js';\nimport { c as clamp } from './clamp.js';\nimport { isEqual } from 'lodash';\n/**\n * Check if browser is IE\n * @return Browser is IE or not\n */\n\nvar isInternetExplorer = function isInternetExplorer() {\n  var _WINDOW$navigator;\n\n  var userAgent = WINDOW === null || WINDOW === void 0 ? void 0 : (_WINDOW$navigator = WINDOW.navigator) === null || _WINDOW$navigator === void 0 ? void 0 : _WINDOW$navigator.userAgent;\n\n  if (!userAgent) {\n    return false;\n  }\n\n  var msie = userAgent.indexOf('MSIE ');\n  var isIEVersion = !!userAgent.match(/Trident.*rv:11\\./);\n  return msie > 0 || isIEVersion;\n};\n\nvar resizeObservers = [];\n\nvar hasActiveObservations = function () {\n  return resizeObservers.some(function (ro) {\n    return ro.activeTargets.length > 0;\n  });\n};\n\nvar hasSkippedObservations = function () {\n  return resizeObservers.some(function (ro) {\n    return ro.skippedTargets.length > 0;\n  });\n};\n\nvar msg = 'ResizeObserver loop completed with undelivered notifications.';\n\nvar deliverResizeLoopError = function () {\n  var event;\n\n  if (typeof ErrorEvent === 'function') {\n    event = new ErrorEvent('error', {\n      message: msg\n    });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent('error', false, false);\n    event.message = msg;\n  }\n\n  window.dispatchEvent(event);\n};\n\nvar ResizeObserverBoxOptions;\n\n(function (ResizeObserverBoxOptions) {\n  ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n  ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n  ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\n\nvar DOMRectReadOnly = function () {\n  function DOMRectReadOnly(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.top = this.y;\n    this.left = this.x;\n    this.bottom = this.top + this.height;\n    this.right = this.left + this.width;\n    return Object.freeze(this);\n  }\n\n  DOMRectReadOnly.prototype.toJSON = function () {\n    var _a = this,\n        x = _a.x,\n        y = _a.y,\n        top = _a.top,\n        right = _a.right,\n        bottom = _a.bottom,\n        left = _a.left,\n        width = _a.width,\n        height = _a.height;\n\n    return {\n      x: x,\n      y: y,\n      top: top,\n      right: right,\n      bottom: bottom,\n      left: left,\n      width: width,\n      height: height\n    };\n  };\n\n  DOMRectReadOnly.fromRect = function (rectangle) {\n    return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n  };\n\n  return DOMRectReadOnly;\n}();\n\nvar isSVG = function (target) {\n  return target instanceof SVGElement && 'getBBox' in target;\n};\n\nvar isHidden = function (target) {\n  if (isSVG(target)) {\n    var _a = target.getBBox(),\n        width = _a.width,\n        height = _a.height;\n\n    return !width && !height;\n  }\n\n  var _b = target,\n      offsetWidth = _b.offsetWidth,\n      offsetHeight = _b.offsetHeight;\n  return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\n\nvar isElement = function (obj) {\n  var _a, _b;\n\n  var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n  return !!(scope && obj instanceof scope.Element);\n};\n\nvar isReplacedElement = function (target) {\n  switch (target.tagName) {\n    case 'INPUT':\n      if (target.type !== 'image') {\n        break;\n      }\n\n    case 'VIDEO':\n    case 'AUDIO':\n    case 'EMBED':\n    case 'OBJECT':\n    case 'CANVAS':\n    case 'IFRAME':\n    case 'IMG':\n      return true;\n  }\n\n  return false;\n};\n\nvar global = typeof window !== 'undefined' ? window : {};\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = /msie|trident/i.test(global.navigator && global.navigator.userAgent);\n\nvar parseDimension = function (pixel) {\n  return parseFloat(pixel || '0');\n};\n\nvar size = function (inlineSize, blockSize, switchSizes) {\n  if (inlineSize === void 0) {\n    inlineSize = 0;\n  }\n\n  if (blockSize === void 0) {\n    blockSize = 0;\n  }\n\n  if (switchSizes === void 0) {\n    switchSizes = false;\n  }\n\n  return Object.freeze({\n    inlineSize: (switchSizes ? blockSize : inlineSize) || 0,\n    blockSize: (switchSizes ? inlineSize : blockSize) || 0\n  });\n};\n\nvar zeroBoxes = Object.freeze({\n  devicePixelContentBoxSize: size(),\n  borderBoxSize: size(),\n  contentBoxSize: size(),\n  contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\n\nvar calculateBoxSizes = function (target, forceRecalculation) {\n  if (forceRecalculation === void 0) {\n    forceRecalculation = false;\n  }\n\n  if (cache.has(target) && !forceRecalculation) {\n    return cache.get(target);\n  }\n\n  if (isHidden(target)) {\n    cache.set(target, zeroBoxes);\n    return zeroBoxes;\n  }\n\n  var cs = getComputedStyle(target);\n  var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n  var removePadding = !IE && cs.boxSizing === 'border-box';\n  var switchSizes = verticalRegexp.test(cs.writingMode || '');\n  var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n  var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n  var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n  var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n  var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n  var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n  var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n  var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n  var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n  var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n  var horizontalPadding = paddingLeft + paddingRight;\n  var verticalPadding = paddingTop + paddingBottom;\n  var horizontalBorderArea = borderLeft + borderRight;\n  var verticalBorderArea = borderTop + borderBottom;\n  var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n  var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n  var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n  var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n  var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n  var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n  var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n  var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n  var boxes = Object.freeze({\n    devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n    borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n    contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n    contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n  });\n  cache.set(target, boxes);\n  return boxes;\n};\n\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n  var _a = calculateBoxSizes(target, forceRecalculation),\n      borderBoxSize = _a.borderBoxSize,\n      contentBoxSize = _a.contentBoxSize,\n      devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n\n  switch (observedBox) {\n    case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n      return devicePixelContentBoxSize;\n\n    case ResizeObserverBoxOptions.BORDER_BOX:\n      return borderBoxSize;\n\n    default:\n      return contentBoxSize;\n  }\n};\n\nvar ResizeObserverEntry = function () {\n  function ResizeObserverEntry(target) {\n    var boxes = calculateBoxSizes(target);\n    this.target = target;\n    this.contentRect = boxes.contentRect;\n    this.borderBoxSize = [boxes.borderBoxSize];\n    this.contentBoxSize = [boxes.contentBoxSize];\n    this.devicePixelContentBoxSize = [boxes.devicePixelContentBoxSize];\n  }\n\n  return ResizeObserverEntry;\n}();\n\nvar calculateDepthForNode = function (node) {\n  if (isHidden(node)) {\n    return Infinity;\n  }\n\n  var depth = 0;\n  var parent = node.parentNode;\n\n  while (parent) {\n    depth += 1;\n    parent = parent.parentNode;\n  }\n\n  return depth;\n};\n\nvar broadcastActiveObservations = function () {\n  var shallowestDepth = Infinity;\n  var callbacks = [];\n  resizeObservers.forEach(function processObserver(ro) {\n    if (ro.activeTargets.length === 0) {\n      return;\n    }\n\n    var entries = [];\n    ro.activeTargets.forEach(function processTarget(ot) {\n      var entry = new ResizeObserverEntry(ot.target);\n      var targetDepth = calculateDepthForNode(ot.target);\n      entries.push(entry);\n      ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n\n      if (targetDepth < shallowestDepth) {\n        shallowestDepth = targetDepth;\n      }\n    });\n    callbacks.push(function resizeObserverCallback() {\n      ro.callback.call(ro.observer, entries, ro.observer);\n    });\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n  });\n\n  for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n    var callback = callbacks_1[_i];\n    callback();\n  }\n\n  return shallowestDepth;\n};\n\nvar gatherActiveObservationsAtDepth = function (depth) {\n  resizeObservers.forEach(function processObserver(ro) {\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n    ro.skippedTargets.splice(0, ro.skippedTargets.length);\n    ro.observationTargets.forEach(function processTarget(ot) {\n      if (ot.isActive()) {\n        if (calculateDepthForNode(ot.target) > depth) {\n          ro.activeTargets.push(ot);\n        } else {\n          ro.skippedTargets.push(ot);\n        }\n      }\n    });\n  });\n};\n\nvar process = function () {\n  var depth = 0;\n  gatherActiveObservationsAtDepth(depth);\n\n  while (hasActiveObservations()) {\n    depth = broadcastActiveObservations();\n    gatherActiveObservationsAtDepth(depth);\n  }\n\n  if (hasSkippedObservations()) {\n    deliverResizeLoopError();\n  }\n\n  return depth > 0;\n};\n\nvar trigger;\nvar callbacks = [];\n\nvar notify = function () {\n  return callbacks.splice(0).forEach(function (cb) {\n    return cb();\n  });\n};\n\nvar queueMicroTask = function (callback) {\n  if (!trigger) {\n    var toggle_1 = 0;\n    var el_1 = document.createTextNode('');\n    var config = {\n      characterData: true\n    };\n    new MutationObserver(function () {\n      return notify();\n    }).observe(el_1, config);\n\n    trigger = function () {\n      el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++);\n    };\n  }\n\n  callbacks.push(callback);\n  trigger();\n};\n\nvar queueResizeObserver = function (cb) {\n  queueMicroTask(function ResizeObserver() {\n    requestAnimationFrame(cb);\n  });\n};\n\nvar watching = 0;\n\nvar isWatching = function () {\n  return !!watching;\n};\n\nvar CATCH_PERIOD = 250;\nvar observerConfig = {\n  attributes: true,\n  characterData: true,\n  childList: true,\n  subtree: true\n};\nvar events = ['resize', 'load', 'transitionend', 'animationend', 'animationstart', 'animationiteration', 'keyup', 'keydown', 'mouseup', 'mousedown', 'mouseover', 'mouseout', 'blur', 'focus'];\n\nvar time = function (timeout) {\n  if (timeout === void 0) {\n    timeout = 0;\n  }\n\n  return Date.now() + timeout;\n};\n\nvar scheduled = false;\n\nvar Scheduler = function () {\n  function Scheduler() {\n    var _this = this;\n\n    this.stopped = true;\n\n    this.listener = function () {\n      return _this.schedule();\n    };\n  }\n\n  Scheduler.prototype.run = function (timeout) {\n    var _this = this;\n\n    if (timeout === void 0) {\n      timeout = CATCH_PERIOD;\n    }\n\n    if (scheduled) {\n      return;\n    }\n\n    scheduled = true;\n    var until = time(timeout);\n    queueResizeObserver(function () {\n      var elementsHaveResized = false;\n\n      try {\n        elementsHaveResized = process();\n      } finally {\n        scheduled = false;\n        timeout = until - time();\n\n        if (!isWatching()) {\n          return;\n        }\n\n        if (elementsHaveResized) {\n          _this.run(1000);\n        } else if (timeout > 0) {\n          _this.run(timeout);\n        } else {\n          _this.start();\n        }\n      }\n    });\n  };\n\n  Scheduler.prototype.schedule = function () {\n    this.stop();\n    this.run();\n  };\n\n  Scheduler.prototype.observe = function () {\n    var _this = this;\n\n    var cb = function () {\n      return _this.observer && _this.observer.observe(document.body, observerConfig);\n    };\n\n    document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n  };\n\n  Scheduler.prototype.start = function () {\n    var _this = this;\n\n    if (this.stopped) {\n      this.stopped = false;\n      this.observer = new MutationObserver(this.listener);\n      this.observe();\n      events.forEach(function (name) {\n        return global.addEventListener(name, _this.listener, true);\n      });\n    }\n  };\n\n  Scheduler.prototype.stop = function () {\n    var _this = this;\n\n    if (!this.stopped) {\n      this.observer && this.observer.disconnect();\n      events.forEach(function (name) {\n        return global.removeEventListener(name, _this.listener, true);\n      });\n      this.stopped = true;\n    }\n  };\n\n  return Scheduler;\n}();\n\nvar scheduler = new Scheduler();\n\nvar updateCount = function (n) {\n  !watching && n > 0 && scheduler.start();\n  watching += n;\n  !watching && scheduler.stop();\n};\n\nvar skipNotifyOnElement = function (target) {\n  return !isSVG(target) && !isReplacedElement(target) && getComputedStyle(target).display === 'inline';\n};\n\nvar ResizeObservation = function () {\n  function ResizeObservation(target, observedBox) {\n    this.target = target;\n    this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n    this.lastReportedSize = {\n      inlineSize: 0,\n      blockSize: 0\n    };\n  }\n\n  ResizeObservation.prototype.isActive = function () {\n    var size = calculateBoxSize(this.target, this.observedBox, true);\n\n    if (skipNotifyOnElement(this.target)) {\n      this.lastReportedSize = size;\n    }\n\n    if (this.lastReportedSize.inlineSize !== size.inlineSize || this.lastReportedSize.blockSize !== size.blockSize) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return ResizeObservation;\n}();\n\nvar ResizeObserverDetail = function () {\n  function ResizeObserverDetail(resizeObserver, callback) {\n    this.activeTargets = [];\n    this.skippedTargets = [];\n    this.observationTargets = [];\n    this.observer = resizeObserver;\n    this.callback = callback;\n  }\n\n  return ResizeObserverDetail;\n}();\n\nvar observerMap = new WeakMap();\n\nvar getObservationIndex = function (observationTargets, target) {\n  for (var i = 0; i < observationTargets.length; i += 1) {\n    if (observationTargets[i].target === target) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar ResizeObserverController = function () {\n  function ResizeObserverController() {}\n\n  ResizeObserverController.connect = function (resizeObserver, callback) {\n    var detail = new ResizeObserverDetail(resizeObserver, callback);\n    observerMap.set(resizeObserver, detail);\n  };\n\n  ResizeObserverController.observe = function (resizeObserver, target, options) {\n    var detail = observerMap.get(resizeObserver);\n    var firstObservation = detail.observationTargets.length === 0;\n\n    if (getObservationIndex(detail.observationTargets, target) < 0) {\n      firstObservation && resizeObservers.push(detail);\n      detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n      updateCount(1);\n      scheduler.schedule();\n    }\n  };\n\n  ResizeObserverController.unobserve = function (resizeObserver, target) {\n    var detail = observerMap.get(resizeObserver);\n    var index = getObservationIndex(detail.observationTargets, target);\n    var lastObservation = detail.observationTargets.length === 1;\n\n    if (index >= 0) {\n      lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n      detail.observationTargets.splice(index, 1);\n      updateCount(-1);\n    }\n  };\n\n  ResizeObserverController.disconnect = function (resizeObserver) {\n    var _this = this;\n\n    var detail = observerMap.get(resizeObserver);\n    detail.observationTargets.slice().forEach(function (ot) {\n      return _this.unobserve(resizeObserver, ot.target);\n    });\n    detail.activeTargets.splice(0, detail.activeTargets.length);\n  };\n\n  return ResizeObserverController;\n}();\n\nvar ResizeObserver = function () {\n  function ResizeObserver(callback) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (typeof callback !== 'function') {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n    }\n\n    ResizeObserverController.connect(this, callback);\n  }\n\n  ResizeObserver.prototype.observe = function (target, options) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.observe(this, target, options);\n  };\n\n  ResizeObserver.prototype.unobserve = function (target) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.unobserve(this, target);\n  };\n\n  ResizeObserver.prototype.disconnect = function () {\n    ResizeObserverController.disconnect(this);\n  };\n\n  ResizeObserver.toString = function () {\n    return 'function ResizeObserver () { [polyfill code] }';\n  };\n\n  return ResizeObserver;\n}();\n\nvar _ref;\n\nvar ResizeObserver$1 = ((_ref = WINDOW) === null || _ref === void 0 ? void 0 : _ref.ResizeObserver) || ResizeObserver;\n\nfunction useOnResize(element, update) {\n  var observerRef = useRef(null);\n  var previousSize = useRef();\n  useEffect(function () {\n    if (!element || !update) {\n      return undefined;\n    }\n\n    previousSize.current = undefined;\n    var observer = observerRef.current || new ResizeObserver$1(function (_ref2) {\n      var _previousSize$current, _previousSize$current2;\n\n      var _ref3 = _slicedToArray(_ref2, 1),\n          entry = _ref3[0];\n\n      var updateFunction = update.current;\n\n      if (!updateFunction) {\n        return;\n      }\n\n      var _entry$contentRect = entry.contentRect,\n          width = _entry$contentRect.width,\n          height = _entry$contentRect.height;\n\n      if (((_previousSize$current = previousSize.current) === null || _previousSize$current === void 0 ? void 0 : _previousSize$current.width) === width && ((_previousSize$current2 = previousSize.current) === null || _previousSize$current2 === void 0 ? void 0 : _previousSize$current2.height) === height) {\n        return;\n      }\n\n      window.requestAnimationFrame(function () {\n        return updateFunction();\n      });\n      previousSize.current = entry.contentRect;\n    });\n    if (!observerRef.current) observerRef.current = observer;\n    observer.observe(element);\n    return function () {\n      observer.unobserve(element);\n    };\n  }, [element, update]);\n}\n\nvar IMG_STYLES = {\n  bottom: 0,\n  left: 0,\n  position: 'absolute',\n  right: 0,\n  top: 0,\n  minHeight: '100%',\n  minWidth: '100%'\n};\nvar WRAPPER_STYLES = {\n  overflow: 'hidden',\n  position: 'relative'\n};\n\nfunction calculateSizes(imageElement, parentElement, aspectRatio) {\n  if (!imageElement || !parentElement || !aspectRatio || aspectRatio === AspectRatio.original) return undefined;\n\n  var _ref = imageElement || {\n    naturalWidth: 0,\n    naturalHeight: 0\n  },\n      imgWidth = _ref.naturalWidth,\n      imgHeight = _ref.naturalHeight;\n\n  var _ref2 = (parentElement === null || parentElement === void 0 ? void 0 : parentElement.getBoundingClientRect()) || {\n    width: 0,\n    height: 0\n  },\n      containerWidth = _ref2.width,\n      containerHeight = _ref2.height;\n\n  return {\n    imgWidth: imgWidth,\n    imgHeight: imgHeight,\n    containerWidth: containerWidth,\n    containerHeight: containerHeight,\n    aspectRatio: aspectRatio\n  };\n}\n\nvar parseFocusPoint = function parseFocusPoint() {\n  var point = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    x: point.x ? clamp(point.x, -1, 1) : 0,\n    y: point.y ? clamp(point.y, -1, 1) : 0\n  };\n};\n\nfunction calculateImageShift(containerToImageSizeRatio, containerSize, imageSize, focusSize, toMinus) {\n  var containerCenter = Math.floor(containerSize / 2); // Container center in px\n\n  var focusFactor = (focusSize + 1) / 2; // Focus point of resize image in px\n\n  var scaledImage = Math.floor(imageSize / containerToImageSizeRatio); // Can't use width() as images may be display:none\n\n  var focus = Math.floor(focusFactor * scaledImage);\n\n  if (toMinus) {\n    focus = scaledImage - focus;\n  }\n\n  var focusOffset = focus - containerCenter; // Calculate difference between focus point and center\n\n  var remainder = scaledImage - focus; // Reduce offset if necessary so image remains filled\n\n  var containerRemainder = containerSize - containerCenter;\n\n  if (remainder < containerRemainder) {\n    focusOffset -= containerRemainder - remainder;\n  }\n\n  if (focusOffset < 0) {\n    focusOffset = 0;\n  }\n\n  return focusOffset * -100 / containerSize;\n}\n\nfunction calculateImageStyle(sizes, point) {\n  if (!sizes.imgWidth || !sizes.imgHeight || !sizes.containerWidth || !sizes.containerHeight) {\n    return undefined;\n  } // Which is over by more?\n\n\n  var widthRatio = sizes.imgWidth / sizes.containerWidth;\n  var heightRatio = sizes.imgHeight / sizes.containerHeight;\n\n  var image = _objectSpread2({}, IMG_STYLES); // Minimize image while still filling space\n\n\n  if (sizes.imgWidth > sizes.containerWidth && sizes.imgHeight > sizes.containerHeight) {\n    image[widthRatio > heightRatio ? 'maxHeight' : 'maxWidth'] = '100%';\n  }\n\n  if (widthRatio > heightRatio) {\n    image.left = \"\".concat(calculateImageShift(heightRatio, sizes.containerWidth, sizes.imgWidth, point.x), \"%\");\n  } else if (widthRatio < heightRatio) {\n    image.top = \"\".concat(calculateImageShift(widthRatio, sizes.containerHeight, sizes.imgHeight, point.y, true), \"%\");\n  }\n\n  return {\n    image: image,\n    wrapper: WRAPPER_STYLES\n  };\n}\n/**\n * Hook that calculate CSS style to shift the image in it's container according to the focus point.\n */\n\n\nvar useFocusPoint = function useFocusPoint(options) {\n  var image = options.image,\n      aspectRatio = options.aspectRatio,\n      focusPoint = options.focusPoint,\n      imgRef = options.imgRef,\n      loadingState = options.loadingState,\n      wrapper = options.wrapper;\n  var point = parseFocusPoint(focusPoint);\n  var previousPoint = useRef();\n  var previousSizes = useRef({});\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      style = _useState2[0],\n      setStyle = _useState2[1]; // Update style.\n\n\n  var updateRef = useRef(null);\n  var update = useMemo(function () {\n    var updateFunction = function updateFunction() {\n      var sizes = calculateSizes(imgRef === null || imgRef === void 0 ? void 0 : imgRef.current, wrapper, aspectRatio);\n\n      if (!sizes || isEqual(sizes, previousSizes.current) && isEqual(point, previousPoint.current)) {\n        // Nothing changed.\n        return;\n      }\n\n      setStyle(calculateImageStyle(sizes, point));\n      previousPoint.current = point;\n      previousSizes.current = sizes;\n    };\n\n    updateRef.current = updateFunction;\n    return updateFunction;\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [].concat(_toConsumableArray(Object.values(point)), [imgRef, wrapper, aspectRatio])); // Update on image loaded.\n\n  useLayoutEffect(update, [image, update, loadingState]); // Update on parent resize.\n\n  useOnResize(wrapper, updateRef);\n  return style;\n};\n\nfunction useImageLoad(imgRef) {\n  var _imgRef$current;\n\n  var _useState = useState('isLoading'),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var update = useCallback(function (event) {\n    var img = imgRef === null || imgRef === void 0 ? void 0 : imgRef.current;\n\n    if (!img || !img.complete) {\n      setState('isLoading');\n      return;\n    }\n\n    if ((event === null || event === void 0 ? void 0 : event.type) === 'error' || img.complete && (img === null || img === void 0 ? void 0 : img.naturalWidth) === 0) {\n      setState('hasError');\n      return;\n    }\n\n    setState('isLoaded');\n  }, [imgRef]);\n  useEffect(function () {\n    var img = imgRef === null || imgRef === void 0 ? void 0 : imgRef.current;\n    if (!img) return undefined;\n    update();\n    img.addEventListener('load', update);\n    img.addEventListener('error', update);\n    return function () {\n      img.removeEventListener('load', update);\n      img.removeEventListener('error', update);\n    };\n  }, [update, imgRef, imgRef === null || imgRef === void 0 ? void 0 : (_imgRef$current = imgRef.current) === null || _imgRef$current === void 0 ? void 0 : _imgRef$current.src]);\n  return state;\n}\n\nvar useClickable = function useClickable(_ref) {\n  var onClick = _ref.onClick,\n      _onKeyPress = _ref.onKeyPress;\n  return useMemo(function () {\n    if (!onClick) return undefined;\n    return {\n      role: 'button',\n      tabIndex: 0,\n      onClick: onClick,\n      onKeyPress: function onKeyPress(event) {\n        _onKeyPress === null || _onKeyPress === void 0 ? void 0 : _onKeyPress(event);\n\n        if (event.key === 'Enter' || event.key === ' ') {\n          onClick === null || onClick === void 0 ? void 0 : onClick();\n        }\n      }\n    };\n  }, [onClick, _onKeyPress]);\n};\n/**\n * Component display name.\n */\n\n\nvar COMPONENT_NAME = 'Thumbnail';\n/**\n * Component default class name and class prefix.\n */\n\nvar CLASSNAME = getRootClassName(COMPONENT_NAME);\n/**\n * Component default props.\n */\n\nvar DEFAULT_PROPS = {\n  fallback: mdiImageBrokenVariant,\n  loading: 'lazy',\n  theme: Theme.light\n};\n/**\n * Thumbnail component.\n *\n * @param  props Component props.\n * @param  ref   Component ref.\n * @return React element.\n */\n\nvar Thumbnail = forwardRef(function (props, ref) {\n  var _wrapper$getBoundingC;\n\n  var align = props.align,\n      alt = props.alt,\n      aspectRatio = props.aspectRatio,\n      badge = props.badge,\n      className = props.className,\n      crossOrigin = props.crossOrigin,\n      fallback = props.fallback,\n      fillHeight = props.fillHeight,\n      focusPoint = props.focusPoint,\n      image = props.image,\n      imgProps = props.imgProps,\n      propImgRef = props.imgRef,\n      loading = props.loading,\n      size = props.size,\n      theme = props.theme,\n      variant = props.variant,\n      forwardedProps = _objectWithoutProperties(props, [\"align\", \"alt\", \"aspectRatio\", \"badge\", \"className\", \"crossOrigin\", \"fallback\", \"fillHeight\", \"focusPoint\", \"image\", \"imgProps\", \"imgRef\", \"loading\", \"size\", \"theme\", \"variant\"]);\n\n  var imgRef = useRef(null); // Image loading state.\n\n  var loadingState = useImageLoad(imgRef);\n  var hasError = loadingState === 'hasError';\n  var isLoading = loadingState === 'isLoading';\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      wrapper = _useState2[0],\n      setWrapper = _useState2[1];\n\n  var wrapperProps = _objectSpread2({}, forwardedProps, {\n    ref: mergeRefs(setWrapper, ref),\n    className: classnames(className, handleBasicClasses({\n      align: align,\n      aspectRatio: aspectRatio,\n      prefix: CLASSNAME,\n      size: size,\n      theme: theme,\n      variant: variant,\n      hasBadge: !!badge\n    }), isLoading && (wrapper === null || wrapper === void 0 ? void 0 : (_wrapper$getBoundingC = wrapper.getBoundingClientRect()) === null || _wrapper$getBoundingC === void 0 ? void 0 : _wrapper$getBoundingC.height) && 'lumx-color-background-dark-L6', fillHeight && \"\".concat(CLASSNAME, \"--fill-height\"))\n  }, useClickable(props)); // Update img style according to focus point and aspect ratio.\n\n\n  var style = useFocusPoint({\n    image: image,\n    focusPoint: focusPoint,\n    aspectRatio: aspectRatio,\n    imgRef: imgRef,\n    loadingState: loadingState,\n    wrapper: wrapper\n  });\n  return React.createElement(\"div\", wrapperProps, React.createElement(\"div\", {\n    className: \"\".concat(CLASSNAME, \"__background\"),\n    style: _objectSpread2({}, style === null || style === void 0 ? void 0 : style.wrapper, {\n      // Remove from layout if image not loaded correctly (use fallback)\n      display: hasError ? 'none' : undefined,\n      // Hide while loading.\n      visibility: isLoading ? 'hidden' : undefined\n    })\n  }, React.createElement(\"img\", _extends({}, imgProps, {\n    style: _objectSpread2({}, imgProps === null || imgProps === void 0 ? void 0 : imgProps.style, {}, style === null || style === void 0 ? void 0 : style.image),\n    ref: mergeRefs(imgRef, propImgRef),\n    className: (style === null || style === void 0 ? void 0 : style.image) ? \"\".concat(CLASSNAME, \"__focused-image\") : \"\".concat(CLASSNAME, \"__image\"),\n    crossOrigin: crossOrigin && !isInternetExplorer() ? crossOrigin : undefined,\n    src: image,\n    alt: alt,\n    loading: loading\n  }))), hasError && (typeof fallback === 'string' ? React.createElement(Icon, {\n    className: \"\".concat(CLASSNAME, \"__fallback\"),\n    icon: fallback,\n    size: size || Size.m,\n    theme: theme\n  }) : React.createElement(\"div\", {\n    className: \"\".concat(CLASSNAME, \"__fallback\")\n  }, fallback)), badge && React.cloneElement(badge, {\n    className: classnames(\"\".concat(CLASSNAME, \"__badge\"), badge.props.className)\n  }));\n});\nThumbnail.displayName = COMPONENT_NAME;\nThumbnail.className = CLASSNAME;\nThumbnail.defaultProps = DEFAULT_PROPS;\nexport { Thumbnail as T };","map":{"version":3,"sources":["../../../src/utils/isInternetExplorer.ts","../../../../../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../../../../../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../../../../../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../../../../../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../../../../../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../../../../../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../../../../../node_modules/@juggle/resize-observer/lib/utils/element.js","../../../../../node_modules/@juggle/resize-observer/lib/utils/global.js","../../../../../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../../../../../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../../../../../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../../../../../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../../../../../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../../../../../node_modules/@juggle/resize-observer/lib/utils/process.js","../../../../../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../../../../../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../../../../../node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../../../../../node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../../../../../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../../../../../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../../../../../node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../../../src/hooks/useOnResize.ts","../../../src/components/thumbnail/useFocusPoint.ts","../../../src/components/thumbnail/useImageLoad.ts","../../../src/components/thumbnail/useClickable.ts","../../../src/components/thumbnail/Thumbnail.tsx"],"names":["isInternetExplorer","userAgent","WINDOW","msie","isIEVersion","ResizeObserver","observerRef","useRef","previousSize","useEffect","observer","entry","updateFunction","update","width","height","window","IMG_STYLES","bottom","left","position","right","top","minHeight","minWidth","WRAPPER_STYLES","overflow","aspectRatio","AspectRatio","imgWidth","imgHeight","imageElement","naturalWidth","naturalHeight","containerWidth","containerHeight","parseFocusPoint","point","x","clamp","y","containerCenter","Math","containerSize","focusFactor","focusSize","scaledImage","imageSize","focus","focusOffset","remainder","containerRemainder","sizes","widthRatio","heightRatio","image","calculateImageShift","wrapper","useFocusPoint","focusPoint","imgRef","loadingState","options","previousPoint","previousSizes","style","setStyle","useState","updateRef","useMemo","calculateSizes","isEqual","calculateImageStyle","Object","useLayoutEffect","useOnResize","state","setState","useCallback","img","useClickable","onClick","onKeyPress","role","tabIndex","event","COMPONENT_NAME","CLASSNAME","getRootClassName","DEFAULT_PROPS","fallback","loading","theme","Theme","light","Thumbnail","forwardRef","align","alt","badge","className","crossOrigin","fillHeight","imgProps","propImgRef","size","variant","forwardedProps","props","useImageLoad","hasError","isLoading","setWrapper","wrapperProps","ref","mergeRefs","classNames","handleBasicClasses","prefix","hasBadge","display","visibility","undefined","Size"],"mappings":"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","sourcesContent":["import { WINDOW } from '@lumx/react/constants';\n\n/**\n * Check if browser is IE\n * @return Browser is IE or not\n */\nexport const isInternetExplorer = () => {\n    const userAgent = WINDOW?.navigator?.userAgent;\n    if (!userAgent) {\n        return false;\n    }\n    const msie = userAgent.indexOf('MSIE ');\n    const isIEVersion = !!userAgent.match(/Trident.*rv:11\\./);\n    return msie > 0 || isIEVersion;\n};\n","var resizeObservers = [];\nexport { resizeObservers };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","var DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return Object.freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a, _b;\n    var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return Object.freeze({\n        inlineSize: (switchSizes ? blockSize : inlineSize) || 0,\n        blockSize: (switchSizes ? inlineSize : blockSize) || 0\n    });\n};\nvar zeroBoxes = Object.freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = Object.freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = [boxes.borderBoxSize];\n        this.contentBoxSize = [boxes.contentBoxSize];\n        this.devicePixelContentBoxSize = [boxes.devicePixelContentBoxSize];\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","import { Callback, Falsy } from '@lumx/react/utils';\nimport { MutableRefObject, RefObject, useEffect, useRef } from 'react';\nimport { WINDOW } from '@lumx/react/constants';\nimport { ResizeObserver as Polyfill } from '@juggle/resize-observer';\n\nconst ResizeObserver: typeof Polyfill = (WINDOW as any)?.ResizeObserver || Polyfill;\n\nexport function useOnResize(element: HTMLElement | Falsy, update: RefObject<Callback>): void {\n    const observerRef = useRef(null) as MutableRefObject<Polyfill | null>;\n    const previousSize = useRef<{ width: number; height: number }>();\n\n    useEffect(() => {\n        if (!element || !update) {\n            return undefined;\n        }\n\n        previousSize.current = undefined;\n        const observer =\n            observerRef.current ||\n            new ResizeObserver(([entry]) => {\n                const updateFunction = update.current;\n                if (!updateFunction) {\n                    return;\n                }\n\n                const { width, height } = entry.contentRect;\n                if (previousSize.current?.width === width && previousSize.current?.height === height) {\n                    return;\n                }\n\n                window.requestAnimationFrame(() => updateFunction());\n                previousSize.current = entry.contentRect;\n            });\n        if (!observerRef.current) observerRef.current = observer;\n\n        observer.observe(element);\n        return () => {\n            observer.unobserve(element);\n        };\n    }, [element, update]);\n}\n","import { CSSProperties, MutableRefObject, RefObject, useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { useOnResize } from '@lumx/react/hooks/useOnResize';\nimport { AspectRatio } from '@lumx/react';\nimport { clamp } from '@lumx/react/utils/clamp';\nimport { LoadingState } from '@lumx/react/components/thumbnail/useImageLoad';\nimport { Callback } from '@lumx/react/utils';\nimport { isEqual } from 'lodash';\nimport { FocusPoint } from './types';\n\nconst IMG_STYLES: CSSProperties = {\n    bottom: 0,\n    left: 0,\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    minHeight: '100%',\n    minWidth: '100%',\n};\n\nconst WRAPPER_STYLES: CSSProperties = {\n    overflow: 'hidden',\n    position: 'relative',\n};\n\ntype Sizes = {\n    imgWidth?: number;\n    imgHeight?: number;\n    containerWidth?: number;\n    containerHeight?: number;\n    aspectRatio?: AspectRatio;\n};\n\nfunction calculateSizes(\n    imageElement?: HTMLImageElement | null | undefined,\n    parentElement?: HTMLElement | null,\n    aspectRatio?: AspectRatio,\n): Sizes | undefined {\n    if (!imageElement || !parentElement || !aspectRatio || aspectRatio === AspectRatio.original) return undefined;\n    const { naturalWidth: imgWidth, naturalHeight: imgHeight } = imageElement || { naturalWidth: 0, naturalHeight: 0 };\n    const { width: containerWidth, height: containerHeight } = parentElement?.getBoundingClientRect() || {\n        width: 0,\n        height: 0,\n    };\n    return { imgWidth, imgHeight, containerWidth, containerHeight, aspectRatio };\n}\n\nconst parseFocusPoint = (point: FocusPoint = {}): Required<FocusPoint> => {\n    return { x: point.x ? clamp(point.x, -1, 1) : 0, y: point.y ? clamp(point.y, -1, 1) : 0 };\n};\n\nfunction calculateImageShift(\n    containerToImageSizeRatio: number,\n    containerSize: number,\n    imageSize: number,\n    focusSize: number,\n    toMinus?: boolean,\n) {\n    const containerCenter = Math.floor(containerSize / 2); // Container center in px\n    const focusFactor = (focusSize + 1) / 2; // Focus point of resize image in px\n    const scaledImage = Math.floor(imageSize / containerToImageSizeRatio); // Can't use width() as images may be display:none\n    let focus = Math.floor(focusFactor * scaledImage);\n    if (toMinus) {\n        focus = scaledImage - focus;\n    }\n    let focusOffset = focus - containerCenter; // Calculate difference between focus point and center\n    const remainder = scaledImage - focus; // Reduce offset if necessary so image remains filled\n    const containerRemainder = containerSize - containerCenter;\n    if (remainder < containerRemainder) {\n        focusOffset -= containerRemainder - remainder;\n    }\n    if (focusOffset < 0) {\n        focusOffset = 0;\n    }\n    return (focusOffset * -100) / containerSize;\n}\n\ntype Styles = { wrapper: CSSProperties; image: CSSProperties };\n\nfunction calculateImageStyle(sizes: Sizes, point: Required<FocusPoint>): Styles | undefined {\n    if (!sizes.imgWidth || !sizes.imgHeight || !sizes.containerWidth || !sizes.containerHeight) {\n        return undefined;\n    }\n\n    // Which is over by more?\n    const widthRatio = sizes.imgWidth / sizes.containerWidth;\n    const heightRatio = sizes.imgHeight / sizes.containerHeight;\n\n    const image: CSSProperties = { ...IMG_STYLES };\n\n    // Minimize image while still filling space\n    if (sizes.imgWidth > sizes.containerWidth && sizes.imgHeight > sizes.containerHeight) {\n        image[widthRatio > heightRatio ? 'maxHeight' : 'maxWidth'] = '100%';\n    }\n\n    if (widthRatio > heightRatio) {\n        image.left = `${calculateImageShift(heightRatio, sizes.containerWidth, sizes.imgWidth, point.x)}%`;\n    } else if (widthRatio < heightRatio) {\n        image.top = `${calculateImageShift(widthRatio, sizes.containerHeight, sizes.imgHeight, point.y, true)}%`;\n    }\n\n    return {\n        image,\n        wrapper: WRAPPER_STYLES,\n    };\n}\n\n/**\n * Hook that calculate CSS style to shift the image in it's container according to the focus point.\n */\nexport const useFocusPoint = (options: {\n    image: string;\n    focusPoint?: FocusPoint;\n    aspectRatio?: AspectRatio;\n    imgRef: RefObject<HTMLImageElement>;\n    loadingState: LoadingState;\n    wrapper?: HTMLElement;\n}): Styles | undefined => {\n    const { image, aspectRatio, focusPoint, imgRef, loadingState, wrapper } = options;\n\n    const point = parseFocusPoint(focusPoint);\n\n    const previousPoint = useRef<Required<FocusPoint>>();\n    const previousSizes = useRef<Sizes>({});\n    const [style, setStyle] = useState<Styles>();\n\n    // Update style.\n    const updateRef = useRef<Callback>(null);\n    const update = useMemo(\n        () => {\n            const updateFunction = () => {\n                const sizes = calculateSizes(imgRef?.current, wrapper, aspectRatio);\n                if (!sizes || (isEqual(sizes, previousSizes.current) && isEqual(point, previousPoint.current))) {\n                    // Nothing changed.\n                    return;\n                }\n                setStyle(calculateImageStyle(sizes, point));\n                previousPoint.current = point;\n                previousSizes.current = sizes;\n            };\n            (updateRef as MutableRefObject<Callback>).current = updateFunction;\n            return updateFunction;\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [...Object.values(point), imgRef, wrapper, aspectRatio],\n    );\n\n    // Update on image loaded.\n    useLayoutEffect(update, [image, update, loadingState]);\n\n    // Update on parent resize.\n    useOnResize(wrapper, updateRef);\n\n    return style;\n};\n","import { RefObject, useCallback, useEffect, useState } from 'react';\n\nexport type LoadingState = 'isLoading' | 'isLoaded' | 'hasError';\n\nexport function useImageLoad(imgRef?: RefObject<HTMLImageElement>): LoadingState {\n    const [state, setState] = useState<LoadingState>('isLoading');\n\n    const update = useCallback(\n        (event?: any) => {\n            const img = imgRef?.current;\n            if (!img || !img.complete) {\n                setState('isLoading');\n                return;\n            }\n\n            if (event?.type === 'error' || (img.complete && img?.naturalWidth === 0)) {\n                setState('hasError');\n                return;\n            }\n\n            setState('isLoaded');\n        },\n        [imgRef],\n    );\n\n    useEffect(() => {\n        const img = imgRef?.current;\n        if (!img) return undefined;\n\n        update();\n        img.addEventListener('load', update);\n        img.addEventListener('error', update);\n        return () => {\n            img.removeEventListener('load', update);\n            img.removeEventListener('error', update);\n        };\n    }, [update, imgRef, imgRef?.current?.src]);\n    return state;\n}\n","import { KeyboardEventHandler, MouseEventHandler, useMemo } from 'react';\n\ninterface Props {\n    role: 'button';\n    tabIndex: 0;\n    onClick: MouseEventHandler;\n    onKeyPress: KeyboardEventHandler;\n}\n\nexport const useClickable = ({ onClick, onKeyPress }: { onClick?: any; onKeyPress?: any }): Props | undefined => {\n    return useMemo(() => {\n        if (!onClick) return undefined;\n\n        return {\n            role: 'button',\n            tabIndex: 0,\n            onClick,\n            onKeyPress(event) {\n                onKeyPress?.(event);\n                if (event.key === 'Enter' || event.key === ' ') {\n                    onClick?.();\n                }\n            },\n        };\n    }, [onClick, onKeyPress]);\n};\n","import React, {\n    forwardRef,\n    ImgHTMLAttributes,\n    KeyboardEventHandler,\n    MouseEventHandler,\n    ReactElement,\n    ReactNode,\n    Ref,\n    useRef,\n    useState,\n} from 'react';\nimport classNames from 'classnames';\n\nimport { AspectRatio, HorizontalAlignment, Icon, Size, Theme } from '@lumx/react';\n\nimport { Comp, GenericProps, getRootClassName, handleBasicClasses } from '@lumx/react/utils';\n\nimport { mdiImageBrokenVariant } from '@lumx/icons';\nimport { isInternetExplorer } from '@lumx/react/utils/isInternetExplorer';\nimport { mergeRefs } from '@lumx/react/utils/mergeRefs';\nimport { useFocusPoint } from '@lumx/react/components/thumbnail/useFocusPoint';\nimport { useImageLoad } from '@lumx/react/components/thumbnail/useImageLoad';\nimport { useClickable } from '@lumx/react/components/thumbnail/useClickable';\nimport { FocusPoint, ThumbnailSize, ThumbnailVariant } from './types';\n\ntype ImgHTMLProps = ImgHTMLAttributes<HTMLImageElement>;\n\n/**\n * Defines the props of the component.\n */\nexport interface ThumbnailProps extends GenericProps {\n    /** Alignment of the thumbnail in it's parent (requires flex parent). */\n    align?: HorizontalAlignment;\n    /** Image alternative text. */\n    alt: string;\n    /** Image aspect ratio. */\n    aspectRatio?: AspectRatio;\n    /** Badge. */\n    badge?: ReactElement;\n    /** Image cross origin resource policy. */\n    crossOrigin?: ImgHTMLProps['crossOrigin'];\n    /** Fallback icon (SVG path) or react node when image fails to load. */\n    fallback?: string | ReactNode;\n    /** Whether the thumbnail should fill it's parent size (requires flex parent) or not. */\n    fillHeight?: boolean;\n    /** Apply relative vertical and horizontal shift (from -1 to 1) on the image position inside the thumbnail. */\n    focusPoint?: FocusPoint;\n    /** Image URL. */\n    image: string;\n    /** Props to inject into the native <img> element. */\n    imgProps?: ImgHTMLProps;\n    /** Reference to the native <img> element. */\n    imgRef?: Ref<HTMLImageElement>;\n    /** Size variant of the component. */\n    size?: ThumbnailSize;\n    /** Image loading mode. */\n    loading?: ImgHTMLProps['loading'];\n    /** On click callback. */\n    onClick?: MouseEventHandler<HTMLDivElement>;\n    /** On key press callback. */\n    onKeyPress?: KeyboardEventHandler<HTMLDivElement>;\n    /** Theme adapting the component to light or dark background. */\n    theme?: Theme;\n    /** Variant of the component. */\n    variant?: ThumbnailVariant;\n}\n\n/**\n * Component display name.\n */\nconst COMPONENT_NAME = 'Thumbnail';\n\n/**\n * Component default class name and class prefix.\n */\nconst CLASSNAME = getRootClassName(COMPONENT_NAME);\n\n/**\n * Component default props.\n */\nconst DEFAULT_PROPS: Partial<ThumbnailProps> = {\n    fallback: mdiImageBrokenVariant,\n    loading: 'lazy',\n    theme: Theme.light,\n};\n\n/**\n * Thumbnail component.\n *\n * @param  props Component props.\n * @param  ref   Component ref.\n * @return React element.\n */\nexport const Thumbnail: Comp<ThumbnailProps> = forwardRef((props, ref) => {\n    const {\n        align,\n        alt,\n        aspectRatio,\n        badge,\n        className,\n        crossOrigin,\n        fallback,\n        fillHeight,\n        focusPoint,\n        image,\n        imgProps,\n        imgRef: propImgRef,\n        loading,\n        size,\n        theme,\n        variant,\n        ...forwardedProps\n    } = props;\n    const imgRef = useRef<HTMLImageElement>(null);\n\n    // Image loading state.\n    const loadingState = useImageLoad(imgRef);\n    const hasError = loadingState === 'hasError';\n    const isLoading = loadingState === 'isLoading';\n\n    const [wrapper, setWrapper] = useState<HTMLElement>();\n    const wrapperProps: any = {\n        ...forwardedProps,\n        ref: mergeRefs(setWrapper, ref),\n        className: classNames(\n            className,\n            handleBasicClasses({ align, aspectRatio, prefix: CLASSNAME, size, theme, variant, hasBadge: !!badge }),\n            isLoading && wrapper?.getBoundingClientRect()?.height && 'lumx-color-background-dark-L6',\n            fillHeight && `${CLASSNAME}--fill-height`,\n        ),\n        // Handle clickable Thumbnail a11y.\n        ...useClickable(props),\n    };\n\n    // Update img style according to focus point and aspect ratio.\n    const style = useFocusPoint({ image, focusPoint, aspectRatio, imgRef, loadingState, wrapper });\n\n    return (\n        <div {...wrapperProps}>\n            <div\n                className={`${CLASSNAME}__background`}\n                style={{\n                    ...style?.wrapper,\n                    // Remove from layout if image not loaded correctly (use fallback)\n                    display: hasError ? 'none' : undefined,\n                    // Hide while loading.\n                    visibility: isLoading ? 'hidden' : undefined,\n                }}\n            >\n                <img\n                    {...imgProps}\n                    style={{\n                        ...imgProps?.style,\n                        ...style?.image,\n                    }}\n                    ref={mergeRefs(imgRef, propImgRef)}\n                    className={style?.image ? `${CLASSNAME}__focused-image` : `${CLASSNAME}__image`}\n                    crossOrigin={crossOrigin && !isInternetExplorer() ? crossOrigin : undefined}\n                    src={image}\n                    alt={alt}\n                    loading={loading}\n                />\n            </div>\n            {hasError &&\n                (typeof fallback === 'string' ? (\n                    <Icon className={`${CLASSNAME}__fallback`} icon={fallback} size={size || Size.m} theme={theme} />\n                ) : (\n                    <div className={`${CLASSNAME}__fallback`}>{fallback}</div>\n                ))}\n            {badge &&\n                React.cloneElement(badge, { className: classNames(`${CLASSNAME}__badge`, badge.props.className) })}\n        </div>\n    );\n});\nThumbnail.displayName = COMPONENT_NAME;\nThumbnail.className = CLASSNAME;\nThumbnail.defaultProps = DEFAULT_PROPS;\n"]},"metadata":{},"sourceType":"module"}