{"version":3,"file":"List2.js","sources":["../../../src/hooks/useKeyboardListNavigation.tsx","../../../src/components/list/ListItem.tsx","../../../node_modules/react-is/cjs/react-is.production.min.js","../../../node_modules/react-is/cjs/react-is.development.js","../../../node_modules/react-is/index.js","../../../src/utils/flattenChildren.ts","../../../src/components/list/useInteractiveList.tsx","../../../src/components/list/List.tsx"],"sourcesContent":["import { RefObject, SetStateAction, useEffect, useState } from 'react';\n\nimport get from 'lodash/get';\n\ntype Listener = (evt: KeyboardEvent) => void;\n\ninterface UseKeyboardListNavigationType {\n    /** the current active index */\n    activeItemIndex: number;\n    /** callback to be used when a key is pressed. usually used with the native prop `onKeyDown` */\n    onKeyboardNavigation: Listener;\n    /** Resets the active index to the initial state */\n    resetActiveIndex(): void;\n    /** Sets the active index to a given value */\n    setActiveItemIndex(value: SetStateAction<number>): void;\n}\n\nexport type useKeyboardListNavigationType = <I>(\n    items: I[],\n    ref: RefObject<HTMLElement>,\n    onListItemSelected: (itemSelected: I) => void,\n    onListItemNavigated?: (itemSelected: I) => void,\n    onEnterPressed?: (itemSelected: string) => void,\n    onBackspacePressed?: Listener,\n    keepFocusAfterSelection?: boolean,\n    initialIndex?: number,\n    preventTabOnEnteredValue?: boolean,\n) => UseKeyboardListNavigationType;\n\nconst INITIAL_INDEX = -1;\n\n/**\n * This custom hook provides the necessary set of functions and values to properly navigate\n * a list using the keyboard.\n *\n * @param  items                    the list of items that will be navigated using the keyboard.\n * @param  ref                      A reference to the element that is controlling the navigation.\n * @param  onListItemSelected       callback to be executed when the ENTER key is pressed on an item.\n * @param  onListItemNavigated      callback to be executed when the Arrow keys are pressed.\n * @param  onEnterPressed           callback to be executed when the ENTER key is pressed.\n * @param  onBackspacePressed       callback to be executed when the BACKSPACE key is pressed.\n * @param  keepFocusAfterSelection  determines whether after selecting an item, the focus should be maintained on the current target or not.\n * @param  initialIndex             where should the navigation start from. it defaults to `-1`, so the first item navigated is the item on position `0`.\n * @param  preventTabOnEnteredValue determines whether upon TAB, if there is a value entered, the event is prevented or not.\n * @return useKeyboardListNavigation helpers.\n */\nexport const useKeyboardListNavigation: useKeyboardListNavigationType = (\n    items,\n    ref,\n    onListItemSelected,\n    onListItemNavigated,\n    onEnterPressed,\n    onBackspacePressed,\n    keepFocusAfterSelection = false,\n    initialIndex = INITIAL_INDEX,\n    preventTabOnEnteredValue = true,\n) => {\n    const [activeItemIndex, setActiveItemIndex] = useState(initialIndex);\n\n    /**\n     * This function calculates the next index in the list to be highlighted\n     * @param key - key code pressed\n     * @return next active index\n     */\n    const calculateActiveIndex = (key: string): number => {\n        switch (key) {\n            case 'ArrowDown':\n                return activeItemIndex + 1 < items.length ? activeItemIndex + 1 : 0;\n            case 'ArrowUp':\n                return activeItemIndex - 1 >= 0 ? activeItemIndex - 1 : items.length - 1;\n            default:\n                return initialIndex;\n        }\n    };\n\n    /**\n     * Resets the active index to the initial state\n     */\n    const resetActiveIndex = () => {\n        setActiveItemIndex(initialIndex);\n    };\n\n    /**\n     * Prevents the default event and stops the propagation of said event\n     * @param evt - key pressed event\n     */\n    const preventDefaultAndStopPropagation: Listener = (evt) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n    };\n\n    /**\n     * Handles navigation with the arrows using the keyboard\n     * @param evt - key pressed event\n     */\n    const onArrowPressed: Listener = (evt) => {\n        const { key } = evt;\n        const nextActiveIndex = calculateActiveIndex(key);\n        setActiveItemIndex(nextActiveIndex);\n        preventDefaultAndStopPropagation(evt);\n        if (onListItemNavigated) {\n            const selectedItem = items[nextActiveIndex];\n            onListItemNavigated(selectedItem);\n        }\n    };\n\n    /**\n     * Handles the event when the backspace key is pressed\n     * @param evt - key pressed event\n     */\n    const onBackspaceKeyPressed: Listener = (evt) => {\n        if (onBackspacePressed) {\n            onBackspacePressed(evt);\n        }\n    };\n\n    /**\n     * Handles when the ENTER key is pressed\n     * @param evt - key pressed event\n     */\n    const onEnterKeyPressed: Listener = (evt) => {\n        if (!onListItemSelected) {\n            return;\n        }\n\n        preventDefaultAndStopPropagation(evt);\n\n        if (!keepFocusAfterSelection) {\n            (evt.currentTarget as HTMLElement).blur();\n        }\n\n        const selectedItem = items[activeItemIndex];\n\n        if (selectedItem) {\n            onListItemSelected(selectedItem);\n            resetActiveIndex();\n        } else if (activeItemIndex === initialIndex && onEnterPressed) {\n            const value = get(evt, 'target.value');\n            onEnterPressed(value);\n            resetActiveIndex();\n        }\n    };\n\n    /**\n     * Handles when the TAB key is pressed\n     * @param evt - key pressed event\n     */\n    const onTabKeyPressed: Listener = (evt) => {\n        const value = get(evt, 'target.value');\n\n        if (preventTabOnEnteredValue && value && value.length > 0) {\n            preventDefaultAndStopPropagation(evt);\n        }\n    };\n\n    /**\n     * In order to make it easier in the future to add new events depending on the key\n     * a map was created to add these handlers. In the future, if there is another event\n     * that we need to manage depending on a specific key, we just need to add the key code\n     * here, and as a value, the handler for said key.\n     */\n    const eventsForKeyPressed: Record<string, Listener> = {\n        ArrowDown: onArrowPressed,\n        Tab: onTabKeyPressed,\n        ArrowUp: onArrowPressed,\n        Enter: onEnterKeyPressed,\n        Backspace: onBackspaceKeyPressed,\n    };\n\n    /**\n     * Calculates the next active item index depending on the key pressed.\n     * If the key pressed was ENTER, the function executes the callback `onListItemSelected`\n     * and resets the active index, since an item was selected.\n     * @param evt - key pressed or key down event\n     */\n    const onKeyboardNavigation: Listener = (evt) => {\n        const { key } = evt;\n        const handler = eventsForKeyPressed[key];\n\n        if (handler) {\n            handler(evt);\n        }\n    };\n\n    useEffect(() => {\n        const { current: currentElement } = ref;\n        if (!currentElement) {\n            return undefined;\n        }\n        currentElement.addEventListener('focus', resetActiveIndex);\n        currentElement.addEventListener('keydown', onKeyboardNavigation);\n        return () => {\n            currentElement.removeEventListener('focus', resetActiveIndex);\n            currentElement.removeEventListener('keydown', onKeyboardNavigation);\n        };\n    });\n\n    return {\n        activeItemIndex,\n        onKeyboardNavigation,\n        resetActiveIndex,\n        setActiveItemIndex,\n    };\n};\n","import React, { forwardRef, ReactNode, Ref, SyntheticEvent, useMemo } from 'react';\n\nimport classNames from 'classnames';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { ListProps, Size } from '@lumx/react';\nimport { Comp, GenericProps, getRootClassName, handleBasicClasses, onEnterPressed } from '@lumx/react/utils';\nimport { renderLink } from '@lumx/react/utils/renderLink';\n\nexport type ListItemSize = Extract<Size, 'tiny' | 'regular' | 'big' | 'huge'>;\n\n/**\n * Defines the props of the component.\n */\nexport interface ListItemProps extends GenericProps {\n    /** A component to be rendered after the content. */\n    after?: ReactNode;\n    /** A component to be rendered before the content. */\n    before?: ReactNode;\n    /** Content. */\n    children: string | ReactNode;\n    /** Whether the list item should be highlighted or not. */\n    isHighlighted?: boolean;\n    /** Whether the component is selected or not. */\n    isSelected?: boolean;\n    /** Reference to the <li> element. */\n    listItemRef?: Ref<HTMLLIElement>;\n    /** Custom react component for the link (can be used to inject react router Link). */\n    linkAs?: 'a' | any;\n    /** Props that will be passed on to the Link */\n    linkProps?: React.DetailedHTMLProps<React.AnchorHTMLAttributes<HTMLAnchorElement>, HTMLAnchorElement>;\n    /** Reference to the link element. */\n    linkRef?: Ref<HTMLAnchorElement>;\n    /** Size variant. */\n    size?: ListItemSize;\n    /** On selected callback. */\n    onItemSelected?(evt: SyntheticEvent): void;\n}\n\n/**\n * Component display name.\n */\nconst COMPONENT_NAME = 'ListItem';\n\n/**\n * Component default class name and class prefix.\n */\nconst CLASSNAME = getRootClassName(COMPONENT_NAME);\n\n/**\n * Component default props.\n */\nconst DEFAULT_PROPS: Partial<ListProps> = {\n    size: Size.regular,\n};\n\n/**\n * Check if the list item is clickable.\n * @return `true` if the list item is clickable; `false` otherwise.\n */\nexport function isClickable({ linkProps, onItemSelected }: Partial<ListItemProps>): boolean {\n    return !isEmpty(linkProps?.href) || !!onItemSelected;\n}\n\n/**\n * ListItem component.\n *\n * @param  props Component props.\n * @param  ref   Component ref.\n * @return React element.\n */\nexport const ListItem: Comp<ListItemProps, HTMLLIElement> = forwardRef((props, ref) => {\n    const {\n        after,\n        before,\n        children,\n        className,\n        isHighlighted,\n        isSelected,\n        linkAs,\n        linkProps = {},\n        linkRef,\n        onItemSelected,\n        size,\n        ...forwardedProps\n    } = props;\n    const onKeyDown = useMemo(() => (onItemSelected ? onEnterPressed(onItemSelected as any) : undefined), [\n        onItemSelected,\n    ]);\n\n    const content = (\n        <>\n            {before && <div className={`${CLASSNAME}__before`}>{before}</div>}\n            <div className={`${CLASSNAME}__content`}>{children}</div>\n            {after && <div className={`${CLASSNAME}__after`}>{after}</div>}\n        </>\n    );\n\n    return (\n        <li\n            ref={ref}\n            {...forwardedProps}\n            className={classNames(\n                className,\n                handleBasicClasses({\n                    prefix: CLASSNAME,\n                    size,\n                }),\n            )}\n        >\n            {isClickable({ linkProps, onItemSelected }) ? (\n                /* Clickable list item */\n                renderLink(\n                    {\n                        linkAs,\n                        tabIndex: 0,\n                        role: onItemSelected ? 'button' : undefined,\n                        ...linkProps,\n                        className: classNames(\n                            handleBasicClasses({\n                                prefix: `${CLASSNAME}__link`,\n                                isHighlighted,\n                                isSelected,\n                            }),\n                        ),\n                        onClick: onItemSelected,\n                        onKeyDown,\n                        ref: linkRef,\n                    },\n                    content,\n                )\n            ) : (\n                /* Non clickable list item */\n                <div className={`${CLASSNAME}__wrapper`}>{content}</div>\n            )}\n        </li>\n    );\n});\nListItem.displayName = COMPONENT_NAME;\nListItem.className = CLASSNAME;\nListItem.defaultProps = DEFAULT_PROPS;\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","import get from 'lodash/get';\nimport { Children, Key, ReactChild, ReactNode, cloneElement, isValidElement } from 'react';\nimport { isFragment } from 'react-is';\n\n/**\n * Flatten list of react nodes removing fragments and adding keys.\n * based on: https://github.com/grrowl/react-keyed-flatten-children/blob/5d421644a449765ddd62b659946196b4b5d7b135/index.ts\n *\n * @param  children React nodes to flatten.\n * @return Flattened react nodes.\n */\nexport function flattenChildren(children: ReactNode) {\n    function recur(nodes: ReactNode, keys: Key[] = []) {\n        return Children.toArray(nodes).reduce((acc: ReactChild[], node, index) => {\n            const nodeKeys = keys.concat(get(node, 'key') ?? index);\n            if (isFragment(node)) {\n                acc.push(...recur(node.props.children, nodeKeys));\n            } else if (isValidElement(node)) {\n                acc.push(cloneElement(node, { key: nodeKeys.join('.') }));\n            } else if (typeof node === 'string' || typeof node === 'number') {\n                acc.push(node);\n            }\n            return acc;\n        }, []);\n    }\n    return recur(children);\n}\n","import { ListItemProps } from '@lumx/react';\nimport { isClickable } from '@lumx/react/components/list/ListItem';\n\nimport { isComponent } from '@lumx/react/utils';\nimport { flattenChildren } from '@lumx/react/utils/flattenChildren';\nimport { mergeRefs } from '@lumx/react/utils/mergeRefs';\nimport get from 'lodash/get';\nimport {\n    cloneElement,\n    Key,\n    ReactElement,\n    ReactNode,\n    RefObject,\n    SyntheticEvent,\n    useEffect,\n    useMemo,\n    useState,\n} from 'react';\n\ntype Listener = (evt: KeyboardEvent) => void;\n\ninterface Options {\n    /** List of items to navigate on. */\n    items: ReactNode[] | ReactNode;\n    /** Reference to the list-like element controlling the navigation. */\n    ref: RefObject<HTMLElement>;\n\n    /**\n     * On list item navigated callback (triggered on ARROW key navigation).\n     *\n     * @param index Index of the navigated item among the sibling items.\n     * @param key   React key of the navigated item.\n     */\n    onListItemNavigated?(index: number, key: Key | null): void;\n\n    /**\n     * On list item selected callback (via ENTER key or click).\n     *\n     * @param index Index of the selected item among the sibling items.\n     * @param key   React key of the selected item.\n     * @param evt   Source event (either mouse or keyboard event).\n     */\n    onListItemSelected?(index: number, key: Key | null, evt: SyntheticEvent): void;\n}\n\ninterface Output {\n    /** List of items transformed to accommodate keyboard navigation. */\n    items: ReactNode[];\n    /** Whether the list contains clickable items or not. */\n    hasClickableItem: boolean;\n}\n\nexport type useInteractiveList = (options: Options) => Output;\n\nconst INITIAL_INDEX = -1;\n\nfunction onKeyboardFocus(props: any, handler: (evt: FocusEvent) => void) {\n    let isMouseDown = false;\n    return {\n        onFocus(evt: FocusEvent) {\n            props.onFocus?.(evt);\n            if (!isMouseDown) {\n                handler(evt);\n            }\n        },\n        onMouseDown(evt: MouseEvent) {\n            props.onMouseDown?.(evt);\n            isMouseDown = true;\n        },\n        onMouseUp(evt: MouseEvent) {\n            props.onMouseUp?.(evt);\n            isMouseDown = false;\n        },\n    };\n}\n\nconst isNavigableItem = (node: ReactNode): node is ReactElement => {\n    return isComponent('ListItem')(node) && isClickable(node.props);\n};\n\n/**\n * This custom hook detects clickable list item in a list and make them navigable with the keyboard.\n *\n * @param  options See {@link Options}\n * @return See {@link Output}\n */\nexport const useInteractiveList: useInteractiveList = (options) => {\n    const { ref, onListItemSelected, onListItemNavigated } = options;\n    const items = useMemo(() => flattenChildren(options.items), [options.items]);\n    const [activeItemIndex, setActiveItemIndex] = useState(INITIAL_INDEX);\n\n    // Attach listeners to the list.\n    useEffect(() => {\n        const { current: listElement } = ref;\n        if (!listElement) {\n            return undefined;\n        }\n\n        /**\n         * This function calculates the next index in the list to be active\n         * @param  index current index\n         * @param  code  key code pressed\n         * @return next index\n         */\n        const getNextIndex = (index: number, key: string): number => {\n            switch (key) {\n                case 'ArrowDown':\n                    return index + 1 < items.length ? index + 1 : 0;\n                case 'ArrowUp':\n                    return index - 1 >= 0 ? index - 1 : items.length - 1;\n                default:\n                    return INITIAL_INDEX;\n            }\n        };\n\n        /**\n         * Resets the active index to the initial state\n         */\n        const resetActiveIndex = () => {\n            setActiveItemIndex(INITIAL_INDEX);\n        };\n\n        /**\n         * Handles navigation with the arrows using the keyboard\n         * @param evt Key event\n         */\n        const onArrowPressed: Listener = (evt) => {\n            const { key } = evt;\n            if (key !== 'ArrowUp' && key !== 'ArrowDown') {\n                return;\n            }\n\n            let nextIndex = activeItemIndex;\n            let iterations = 0;\n\n            // Move to next navigable item.\n            do {\n                nextIndex = getNextIndex(nextIndex, key);\n                iterations += 1;\n            } while (\n                nextIndex !== INITIAL_INDEX &&\n                nextIndex !== activeItemIndex &&\n                !isNavigableItem(items[nextIndex] as any) &&\n                iterations < items.length\n            );\n\n            setActiveItemIndex(nextIndex);\n            evt.preventDefault();\n            evt.stopPropagation();\n            onListItemNavigated?.(nextIndex, get(items, [nextIndex, 'key']));\n        };\n\n        /**\n         * Reset active list item index when focusing outside the list.\n         * @param evt Focus out event\n         */\n        const onFocusOut = (evt: FocusEvent) => {\n            if (!evt.relatedTarget || !listElement.contains(evt.relatedTarget as any)) {\n                resetActiveIndex();\n            }\n        };\n\n        listElement.addEventListener('focusout', onFocusOut);\n        listElement.addEventListener('keydown', onArrowPressed);\n        return () => {\n            listElement.removeEventListener('focusout', onFocusOut);\n            listElement.removeEventListener('keydown', onArrowPressed);\n        };\n    }, [ref, activeItemIndex, items, onListItemNavigated]);\n\n    return useMemo(() => {\n        let hasClickableItem = false;\n        const transformedItems = items.map((item, index) => {\n            // Ignore if list not clickable or item is not a simple list item.\n            if (!isNavigableItem(item)) {\n                return item;\n            }\n\n            hasClickableItem = true;\n            const isHighlighted = index === activeItemIndex;\n\n            // Clone list item: inject ref, add tab index and active state.\n            return cloneElement<ListItemProps>(item, {\n                ...item.props,\n                isHighlighted: item.props.isHighlighted ?? isHighlighted,\n                linkRef: mergeRefs(item.props.linkRef, (element: any) => {\n                    if (isHighlighted) {\n                        element?.focus();\n                    }\n                }),\n                onItemSelected(evt) {\n                    item.props.onItemSelected?.();\n                    onListItemSelected?.(index, item.key, evt);\n                },\n                ...onKeyboardFocus(item.props, () => {\n                    setActiveItemIndex(index);\n                }),\n            });\n        });\n        return { items: transformedItems, hasClickableItem };\n    }, [items, activeItemIndex, onListItemSelected]);\n};\n","import { Size } from '@lumx/react';\n\nimport { useKeyboardListNavigation } from '@lumx/react/hooks/useKeyboardListNavigation';\nimport { Comp, GenericProps, getRootClassName, handleBasicClasses } from '@lumx/react/utils';\nimport { mergeRefs } from '@lumx/react/utils/mergeRefs';\n\nimport classNames from 'classnames';\nimport React, { forwardRef, Key, ReactNode, SyntheticEvent, useRef } from 'react';\nimport { useInteractiveList } from './useInteractiveList';\n\n/**\n * Defines the props of the component.\n */\nexport interface ListProps extends GenericProps {\n    /** List content (should be ListItem, ListSubheader or ListDivider). */\n    children: ReactNode;\n    /**\n     * Whether the list items are clickable.\n     * @deprecated not needed anymore.\n     */\n    isClickable?: boolean;\n    /** Item padding size. */\n    itemPadding?: Extract<Size, 'big' | 'huge'>;\n    /**\n     * On list item selected callback.\n     *\n     * @param key   React key of the selected item.\n     * @param index Index of the selected item among the sibling items.\n     * @param evt   Source event (either mouse or keyboard event).\n     */\n    onListItemSelected?(key: Key, index: number, evt: SyntheticEvent): void;\n}\n\n/**\n * Component display name.\n */\nconst COMPONENT_NAME = 'List';\n\n/**\n * Component default class name and class prefix.\n */\nconst CLASSNAME = getRootClassName(COMPONENT_NAME);\n\n/* eslint-disable jsx-a11y/no-noninteractive-tabindex */\n/**\n * List component.\n *\n * @param  props Component props.\n * @param  ref   Component ref.\n * @return React element.\n */\nconst InternalList: Comp<ListProps, HTMLUListElement> = forwardRef((props, ref) => {\n    const { children, className, isClickable, itemPadding, onListItemSelected, ...forwardedProps } = props;\n    const listElementRef = useRef<HTMLUListElement>(null);\n\n    const { items, hasClickableItem } = useInteractiveList({\n        items: children,\n        ref: listElementRef,\n        onListItemSelected,\n    });\n    const clickable = hasClickableItem || isClickable;\n\n    return (\n        <ul\n            {...forwardedProps}\n            className={classNames(\n                className,\n                handleBasicClasses({\n                    prefix: CLASSNAME,\n                    itemPadding: itemPadding ?? (clickable ? Size.big : undefined),\n                }),\n            )}\n            tabIndex={clickable ? 0 : -1}\n            ref={mergeRefs(ref, listElementRef)}\n        >\n            {items}\n        </ul>\n    );\n});\nInternalList.displayName = COMPONENT_NAME;\nInternalList.className = CLASSNAME;\n\nexport const List = Object.assign(InternalList, { useKeyboardListNavigation });\n"],"names":["INITIAL_INDEX","useKeyboardListNavigation","items","ref","onListItemSelected","onListItemNavigated","onEnterPressed","onBackspacePressed","keepFocusAfterSelection","initialIndex","preventTabOnEnteredValue","useState","activeItemIndex","setActiveItemIndex","calculateActiveIndex","key","length","resetActiveIndex","preventDefaultAndStopPropagation","evt","preventDefault","stopPropagation","onArrowPressed","nextActiveIndex","selectedItem","onBackspaceKeyPressed","onEnterKeyPressed","currentTarget","blur","value","get","onTabKeyPressed","eventsForKeyPressed","ArrowDown","Tab","ArrowUp","Enter","Backspace","onKeyboardNavigation","handler","useEffect","currentElement","current","undefined","addEventListener","removeEventListener","COMPONENT_NAME","CLASSNAME","getRootClassName","DEFAULT_PROPS","size","Size","regular","isClickable","linkProps","onItemSelected","isEmpty","href","ListItem","forwardRef","props","after","before","children","className","isHighlighted","isSelected","linkAs","linkRef","forwardedProps","onKeyDown","useMemo","content","classNames","handleBasicClasses","prefix","renderLink","tabIndex","role","onClick","displayName","defaultProps","require$$0","require$$1","flattenChildren","recur","nodes","keys","Children","toArray","reduce","acc","node","index","nodeKeys","concat","isFragment","push","isValidElement","cloneElement","join","onKeyboardFocus","isMouseDown","onFocus","onMouseDown","onMouseUp","isNavigableItem","isComponent","useInteractiveList","options","listElement","getNextIndex","nextIndex","iterations","onFocusOut","relatedTarget","contains","hasClickableItem","transformedItems","map","item","mergeRefs","element","focus","InternalList","itemPadding","listElementRef","useRef","clickable","big","List","Object","assign"],"mappings":";;;;;;;;;;;;AA6BA,IAAMA,aAAa,GAAG,CAAC,CAAvB;AAEA;;;;;;;;;;;;;;;;AAeO,IAAMC,yBAAwD,GAAG,SAA3DA,yBAA2D,CACpEC,KADoE,EAEpEC,GAFoE,EAGpEC,kBAHoE,EAIpEC,mBAJoE,EAKpEC,cALoE,EAMpEC,kBANoE,EAUnE;AAAA,MAHDC,uBAGC,uEAHyB,KAGzB;AAAA,MAFDC,YAEC,uEAFcT,aAEd;AAAA,MADDU,wBACC,uEAD0B,IAC1B;;AAAA,kBAC6CC,QAAQ,CAACF,YAAD,CADrD;AAAA;AAAA,MACMG,eADN;AAAA,MACuBC,kBADvB;AAGD;;;;;;;AAKA,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,GAAD,EAAyB;AAClD,YAAQA,GAAR;AACI,WAAK,WAAL;AACI,eAAOH,eAAe,GAAG,CAAlB,GAAsBV,KAAK,CAACc,MAA5B,GAAqCJ,eAAe,GAAG,CAAvD,GAA2D,CAAlE;;AACJ,WAAK,SAAL;AACI,eAAOA,eAAe,GAAG,CAAlB,IAAuB,CAAvB,GAA2BA,eAAe,GAAG,CAA7C,GAAiDV,KAAK,CAACc,MAAN,GAAe,CAAvE;;AACJ;AACI,eAAOP,YAAP;AANR;AAQH,GATD;AAWA;;;;;AAGA,MAAMQ,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3BJ,IAAAA,kBAAkB,CAACJ,YAAD,CAAlB;AACH,GAFD;AAIA;;;;;;AAIA,MAAMS,gCAA0C,GAAG,SAA7CA,gCAA6C,CAACC,GAAD,EAAS;AACxDA,IAAAA,GAAG,CAACC,cAAJ;AACAD,IAAAA,GAAG,CAACE,eAAJ;AACH,GAHD;AAKA;;;;;;AAIA,MAAMC,cAAwB,GAAG,SAA3BA,cAA2B,CAACH,GAAD,EAAS;AAAA,QAC9BJ,GAD8B,GACtBI,GADsB,CAC9BJ,GAD8B;AAEtC,QAAMQ,eAAe,GAAGT,oBAAoB,CAACC,GAAD,CAA5C;AACAF,IAAAA,kBAAkB,CAACU,eAAD,CAAlB;AACAL,IAAAA,gCAAgC,CAACC,GAAD,CAAhC;;AACA,QAAId,mBAAJ,EAAyB;AACrB,UAAMmB,YAAY,GAAGtB,KAAK,CAACqB,eAAD,CAA1B;AACAlB,MAAAA,mBAAmB,CAACmB,YAAD,CAAnB;AACH;AACJ,GATD;AAWA;;;;;;AAIA,MAAMC,qBAA+B,GAAG,SAAlCA,qBAAkC,CAACN,GAAD,EAAS;AAC7C,QAAIZ,kBAAJ,EAAwB;AACpBA,MAAAA,kBAAkB,CAACY,GAAD,CAAlB;AACH;AACJ,GAJD;AAMA;;;;;;AAIA,MAAMO,iBAA2B,GAAG,SAA9BA,iBAA8B,CAACP,GAAD,EAAS;AACzC,QAAI,CAACf,kBAAL,EAAyB;AACrB;AACH;;AAEDc,IAAAA,gCAAgC,CAACC,GAAD,CAAhC;;AAEA,QAAI,CAACX,uBAAL,EAA8B;AACzBW,MAAAA,GAAG,CAACQ,aAAL,CAAmCC,IAAnC;AACH;;AAED,QAAMJ,YAAY,GAAGtB,KAAK,CAACU,eAAD,CAA1B;;AAEA,QAAIY,YAAJ,EAAkB;AACdpB,MAAAA,kBAAkB,CAACoB,YAAD,CAAlB;AACAP,MAAAA,gBAAgB;AACnB,KAHD,MAGO,IAAIL,eAAe,KAAKH,YAApB,IAAoCH,cAAxC,EAAwD;AAC3D,UAAMuB,MAAK,GAAGC,GAAG,CAACX,GAAD,EAAM,cAAN,CAAjB;;AACAb,MAAAA,cAAc,CAACuB,MAAD,CAAd;AACAZ,MAAAA,gBAAgB;AACnB;AACJ,GArBD;AAuBA;;;;;;AAIA,MAAMc,eAAyB,GAAG,SAA5BA,eAA4B,CAACZ,GAAD,EAAS;AACvC,QAAMU,KAAK,GAAGC,GAAG,CAACX,GAAD,EAAM,cAAN,CAAjB;;AAEA,QAAIT,wBAAwB,IAAImB,KAA5B,IAAqCA,KAAK,CAACb,MAAN,GAAe,CAAxD,EAA2D;AACvDE,MAAAA,gCAAgC,CAACC,GAAD,CAAhC;AACH;AACJ,GAND;AAQA;;;;;;;;AAMA,MAAMa,mBAA6C,GAAG;AAClDC,IAAAA,SAAS,EAAEX,cADuC;AAElDY,IAAAA,GAAG,EAAEH,eAF6C;AAGlDI,IAAAA,OAAO,EAAEb,cAHyC;AAIlDc,IAAAA,KAAK,EAAEV,iBAJ2C;AAKlDW,IAAAA,SAAS,EAAEZ;AALuC,GAAtD;AAQA;;;;;;;AAMA,MAAMa,oBAA8B,GAAG,SAAjCA,oBAAiC,CAACnB,GAAD,EAAS;AAAA,QACpCJ,GADoC,GAC5BI,GAD4B,CACpCJ,GADoC;AAE5C,QAAMwB,OAAO,GAAGP,mBAAmB,CAACjB,GAAD,CAAnC;;AAEA,QAAIwB,OAAJ,EAAa;AACTA,MAAAA,OAAO,CAACpB,GAAD,CAAP;AACH;AACJ,GAPD;;AASAqB,EAAAA,SAAS,CAAC,YAAM;AAAA,QACKC,cADL,GACwBtC,GADxB,CACJuC,OADI;;AAEZ,QAAI,CAACD,cAAL,EAAqB;AACjB,aAAOE,SAAP;AACH;;AACDF,IAAAA,cAAc,CAACG,gBAAf,CAAgC,OAAhC,EAAyC3B,gBAAzC;AACAwB,IAAAA,cAAc,CAACG,gBAAf,CAAgC,SAAhC,EAA2CN,oBAA3C;AACA,WAAO,YAAM;AACTG,MAAAA,cAAc,CAACI,mBAAf,CAAmC,OAAnC,EAA4C5B,gBAA5C;AACAwB,MAAAA,cAAc,CAACI,mBAAf,CAAmC,SAAnC,EAA8CP,oBAA9C;AACH,KAHD;AAIH,GAXQ,CAAT;AAaA,SAAO;AACH1B,IAAAA,eAAe,EAAfA,eADG;AAEH0B,IAAAA,oBAAoB,EAApBA,oBAFG;AAGHrB,IAAAA,gBAAgB,EAAhBA,gBAHG;AAIHJ,IAAAA,kBAAkB,EAAlBA;AAJG,GAAP;AAMH,CA7JM;;ACPP;;;AAGA,IAAMiC,cAAc,GAAG,UAAvB;AAEA;;;;AAGA,IAAMC,SAAS,GAAGC,gBAAgB,CAACF,cAAD,CAAlC;AAEA;;;;AAGA,IAAMG,aAAiC,GAAG;AACtCC,EAAAA,IAAI,EAAEC,IAAI,CAACC;AAD2B,CAA1C;AAIA;;;;;AAIO,SAASC,WAAT,OAAqF;AAAA,MAA9DC,SAA8D,QAA9DA,SAA8D;AAAA,MAAnDC,cAAmD,QAAnDA,cAAmD;AACxF,SAAO,CAACC,OAAO,CAACF,SAAD,aAACA,SAAD,uBAACA,SAAS,CAAEG,IAAZ,CAAR,IAA6B,CAAC,CAACF,cAAtC;AACH;AAED;;;;;;;;IAOaG,QAA4C,GAAGC,UAAU,CAAC,UAACC,KAAD,EAAQzD,GAAR,EAAgB;AAAA,MAE/E0D,KAF+E,GAc/ED,KAd+E,CAE/EC,KAF+E;AAAA,MAG/EC,MAH+E,GAc/EF,KAd+E,CAG/EE,MAH+E;AAAA,MAI/EC,QAJ+E,GAc/EH,KAd+E,CAI/EG,QAJ+E;AAAA,MAK/EC,SAL+E,GAc/EJ,KAd+E,CAK/EI,SAL+E;AAAA,MAM/EC,aAN+E,GAc/EL,KAd+E,CAM/EK,aAN+E;AAAA,MAO/EC,UAP+E,GAc/EN,KAd+E,CAO/EM,UAP+E;AAAA,MAQ/EC,MAR+E,GAc/EP,KAd+E,CAQ/EO,MAR+E;AAAA,yBAc/EP,KAd+E,CAS/EN,SAT+E;AAAA,MAS/EA,SAT+E,iCASnE,EATmE;AAAA,MAU/Ec,OAV+E,GAc/ER,KAd+E,CAU/EQ,OAV+E;AAAA,MAW/Eb,cAX+E,GAc/EK,KAd+E,CAW/EL,cAX+E;AAAA,MAY/EL,IAZ+E,GAc/EU,KAd+E,CAY/EV,IAZ+E;AAAA,MAa5EmB,cAb4E,4BAc/ET,KAd+E;;AAenF,MAAMU,SAAS,GAAGC,OAAO,CAAC;AAAA,WAAOhB,cAAc,GAAGjD,cAAc,CAACiD,cAAD,CAAjB,GAA2CZ,SAAhE;AAAA,GAAD,EAA6E,CAClGY,cADkG,CAA7E,CAAzB;AAIA,MAAMiB,OAAO,GACT,0CACKV,MAAM,IAAI;AAAK,IAAA,SAAS,YAAKf,SAAL;AAAd,KAAyCe,MAAzC,CADf,EAEI;AAAK,IAAA,SAAS,YAAKf,SAAL;AAAd,KAA0CgB,QAA1C,CAFJ,EAGKF,KAAK,IAAI;AAAK,IAAA,SAAS,YAAKd,SAAL;AAAd,KAAwCc,KAAxC,CAHd,CADJ;AAQA,SACI;AACI,IAAA,GAAG,EAAE1D;AADT,KAEQkE,cAFR;AAGI,IAAA,SAAS,EAAEI,UAAU,CACjBT,SADiB,EAEjBU,kBAAkB,CAAC;AACfC,MAAAA,MAAM,EAAE5B,SADO;AAEfG,MAAAA,IAAI,EAAJA;AAFe,KAAD,CAFD;AAHzB,MAWKG,WAAW,CAAC;AAAEC,IAAAA,SAAS,EAATA,SAAF;AAAaC,IAAAA,cAAc,EAAdA;AAAb,GAAD,CAAX;AACG;AACAqB,EAAAA,UAAU;AAEFT,IAAAA,MAAM,EAANA,MAFE;AAGFU,IAAAA,QAAQ,EAAE,CAHR;AAIFC,IAAAA,IAAI,EAAEvB,cAAc,GAAG,QAAH,GAAcZ;AAJhC,KAKCW,SALD;AAMFU,IAAAA,SAAS,EAAES,UAAU,CACjBC,kBAAkB,CAAC;AACfC,MAAAA,MAAM,YAAK5B,SAAL,WADS;AAEfkB,MAAAA,aAAa,EAAbA,aAFe;AAGfC,MAAAA,UAAU,EAAVA;AAHe,KAAD,CADD,CANnB;AAaFa,IAAAA,OAAO,EAAExB,cAbP;AAcFe,IAAAA,SAAS,EAATA,SAdE;AAeFnE,IAAAA,GAAG,EAAEiE;AAfH,MAiBNI,OAjBM,CAFb;AAsBG;AACA;AAAK,IAAA,SAAS,YAAKzB,SAAL;AAAd,KAA0CyB,OAA1C,CAlCR,CADJ;AAuCH,CAlEqE;AAmEtEd,QAAQ,CAACsB,WAAT,GAAuBlC,cAAvB;AACAY,QAAQ,CAACM,SAAT,GAAqBjB,SAArB;AACAW,QAAQ,CAACuB,YAAT,GAAwBhC,aAAxB;;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEa,IAAI,CAAC,CAAC,UAAU,GAAG,OAAO,MAAM,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACrf,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC;AACxQ,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,GAAG,OAAO,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,aAAiB,CAAC,CAAC,CAAC,kBAAsB,CAAC,CAAC,CAAC,mBAAuB,CAAC,CAAC,CAAC,mBAAuB,CAAC,CAAC,CAAC,WAAe,CAAC,CAAC,CAAC,cAAkB,CAAC,CAAC,CAAC,YAAgB,CAAC,CAAC,CAAC,QAAY,CAAC,CAAC,CAAC,QAAY,CAAC,CAAC,CAAC,UAAc,CAAC,CAAC,CAAC;AAClf,YAAgB,CAAC,CAAC,CAAC,cAAkB,CAAC,CAAC,CAAC,YAAgB,CAAC,CAAC,CAAC,eAAmB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,oBAAwB,CAAC,CAAC,CAAC,qBAAyB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,qBAAyB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,aAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAM,QAAQ,GAAG,OAAO,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,gBAAoB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,cAAkB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,UAAc,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5d,UAAc,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,YAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,cAAkB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,gBAAoB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,cAAkB,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5O,sBAA0B,CAAC,SAAS,CAAC,CAAC,CAAC,OAAM,QAAQ,GAAG,OAAO,CAAC,EAAE,UAAU,GAAG,OAAO,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,QAAQ,GAAG,OAAO,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,UAAc,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJpU;AACA;AACA;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE;AAC3C,EAAE,CAAC,WAAW;AAEd;AACA;AACA;AACA,IAAI,SAAS,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,GAAG,CAAC;AAC3D,IAAI,kBAAkB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC;AAC1E,IAAI,iBAAiB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,MAAM,CAAC;AACxE,IAAI,mBAAmB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC;AAC5E,IAAI,sBAAsB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,GAAG,MAAM,CAAC;AAClF,IAAI,mBAAmB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC;AAC5E,IAAI,mBAAmB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC;AAC5E,IAAI,kBAAkB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC;AAC1E;AACA;AACA,IAAI,qBAAqB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,GAAG,MAAM,CAAC;AAChF,IAAI,0BAA0B,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,GAAG,MAAM,CAAC;AAC1F,IAAI,sBAAsB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,GAAG,MAAM,CAAC;AAClF,IAAI,mBAAmB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC;AAC5E,IAAI,wBAAwB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,GAAG,MAAM,CAAC;AACtF,IAAI,eAAe,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC;AACpE,IAAI,eAAe,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC;AACpE,IAAI,gBAAgB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,MAAM,CAAC;AACtE,IAAI,sBAAsB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,GAAG,MAAM,CAAC;AAClF,IAAI,oBAAoB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC;AAC9E,IAAI,gBAAgB,GAAG,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,MAAM,CAAC;AACtE;AACA,SAAS,kBAAkB,CAAC,IAAI,EAAE;AAClC,EAAE,OAAO,OAAO,IAAI,KAAK,QAAQ,IAAI,OAAO,IAAI,KAAK,UAAU;AAC/D,EAAE,IAAI,KAAK,mBAAmB,IAAI,IAAI,KAAK,0BAA0B,IAAI,IAAI,KAAK,mBAAmB,IAAI,IAAI,KAAK,sBAAsB,IAAI,IAAI,KAAK,mBAAmB,IAAI,IAAI,KAAK,wBAAwB,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,CAAC,QAAQ,KAAK,eAAe,IAAI,IAAI,CAAC,QAAQ,KAAK,eAAe,IAAI,IAAI,CAAC,QAAQ,KAAK,mBAAmB,IAAI,IAAI,CAAC,QAAQ,KAAK,kBAAkB,IAAI,IAAI,CAAC,QAAQ,KAAK,sBAAsB,IAAI,IAAI,CAAC,QAAQ,KAAK,sBAAsB,IAAI,IAAI,CAAC,QAAQ,KAAK,oBAAoB,IAAI,IAAI,CAAC,QAAQ,KAAK,gBAAgB,IAAI,IAAI,CAAC,QAAQ,KAAK,gBAAgB,CAAC,CAAC;AACtmB,CAAC;AACD;AACA,SAAS,MAAM,CAAC,MAAM,EAAE;AACxB,EAAE,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,IAAI,EAAE;AACrD,IAAI,IAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;AACnC;AACA,IAAI,QAAQ,QAAQ;AACpB,MAAM,KAAK,kBAAkB;AAC7B,QAAQ,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;AAC/B;AACA,QAAQ,QAAQ,IAAI;AACpB,UAAU,KAAK,qBAAqB,CAAC;AACrC,UAAU,KAAK,0BAA0B,CAAC;AAC1C,UAAU,KAAK,mBAAmB,CAAC;AACnC,UAAU,KAAK,mBAAmB,CAAC;AACnC,UAAU,KAAK,sBAAsB,CAAC;AACtC,UAAU,KAAK,mBAAmB;AAClC,YAAY,OAAO,IAAI,CAAC;AACxB;AACA,UAAU;AACV,YAAY,IAAI,YAAY,GAAG,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;AACrD;AACA,YAAY,QAAQ,YAAY;AAChC,cAAc,KAAK,kBAAkB,CAAC;AACtC,cAAc,KAAK,sBAAsB,CAAC;AAC1C,cAAc,KAAK,eAAe,CAAC;AACnC,cAAc,KAAK,eAAe,CAAC;AACnC,cAAc,KAAK,mBAAmB;AACtC,gBAAgB,OAAO,YAAY,CAAC;AACpC;AACA,cAAc;AACd,gBAAgB,OAAO,QAAQ,CAAC;AAChC,aAAa;AACb;AACA,SAAS;AACT;AACA,MAAM,KAAK,iBAAiB;AAC5B,QAAQ,OAAO,QAAQ,CAAC;AACxB,KAAK;AACL,GAAG;AACH;AACA,EAAE,OAAO,SAAS,CAAC;AACnB,CAAC;AACD;AACA,IAAI,SAAS,GAAG,qBAAqB,CAAC;AACtC,IAAI,cAAc,GAAG,0BAA0B,CAAC;AAChD,IAAI,eAAe,GAAG,kBAAkB,CAAC;AACzC,IAAI,eAAe,GAAG,mBAAmB,CAAC;AAC1C,IAAI,OAAO,GAAG,kBAAkB,CAAC;AACjC,IAAI,UAAU,GAAG,sBAAsB,CAAC;AACxC,IAAI,QAAQ,GAAG,mBAAmB,CAAC;AACnC,IAAI,IAAI,GAAG,eAAe,CAAC;AAC3B,IAAI,IAAI,GAAG,eAAe,CAAC;AAC3B,IAAI,MAAM,GAAG,iBAAiB,CAAC;AAC/B,IAAI,QAAQ,GAAG,mBAAmB,CAAC;AACnC,IAAI,UAAU,GAAG,sBAAsB,CAAC;AACxC,IAAI,QAAQ,GAAG,mBAAmB,CAAC;AACnC,IAAI,mCAAmC,GAAG,KAAK,CAAC;AAChD;AACA,SAAS,WAAW,CAAC,MAAM,EAAE;AAC7B,EAAE;AACF,IAAI,IAAI,CAAC,mCAAmC,EAAE;AAC9C,MAAM,mCAAmC,GAAG,IAAI,CAAC;AACjD;AACA,MAAM,OAAO,CAAC,MAAM,CAAC,CAAC,uDAAuD,GAAG,4DAA4D,GAAG,gEAAgE,CAAC,CAAC;AACjN,KAAK;AACL,GAAG;AACH;AACA,EAAE,OAAO,gBAAgB,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,qBAAqB,CAAC;AAC9E,CAAC;AACD,SAAS,gBAAgB,CAAC,MAAM,EAAE;AAClC,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,0BAA0B,CAAC;AACvD,CAAC;AACD,SAAS,iBAAiB,CAAC,MAAM,EAAE;AACnC,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,kBAAkB,CAAC;AAC/C,CAAC;AACD,SAAS,iBAAiB,CAAC,MAAM,EAAE;AACnC,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,mBAAmB,CAAC;AAChD,CAAC;AACD,SAAS,SAAS,CAAC,MAAM,EAAE;AAC3B,EAAE,OAAO,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,IAAI,IAAI,MAAM,CAAC,QAAQ,KAAK,kBAAkB,CAAC;AACjG,CAAC;AACD,SAAS,YAAY,CAAC,MAAM,EAAE;AAC9B,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,sBAAsB,CAAC;AACnD,CAAC;AACD,SAAS,UAAU,CAAC,MAAM,EAAE;AAC5B,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,mBAAmB,CAAC;AAChD,CAAC;AACD,SAAS,MAAM,CAAC,MAAM,EAAE;AACxB,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,eAAe,CAAC;AAC5C,CAAC;AACD,SAAS,MAAM,CAAC,MAAM,EAAE;AACxB,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,eAAe,CAAC;AAC5C,CAAC;AACD,SAAS,QAAQ,CAAC,MAAM,EAAE;AAC1B,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,iBAAiB,CAAC;AAC9C,CAAC;AACD,SAAS,UAAU,CAAC,MAAM,EAAE;AAC5B,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,mBAAmB,CAAC;AAChD,CAAC;AACD,SAAS,YAAY,CAAC,MAAM,EAAE;AAC9B,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,sBAAsB,CAAC;AACnD,CAAC;AACD,SAAS,UAAU,CAAC,MAAM,EAAE;AAC5B,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,mBAAmB,CAAC;AAChD,CAAC;AACD;AACA,iBAAiB,GAAG,SAAS,CAAC;AAC9B,sBAAsB,GAAG,cAAc,CAAC;AACxC,uBAAuB,GAAG,eAAe,CAAC;AAC1C,uBAAuB,GAAG,eAAe,CAAC;AAC1C,eAAe,GAAG,OAAO,CAAC;AAC1B,kBAAkB,GAAG,UAAU,CAAC;AAChC,gBAAgB,GAAG,QAAQ,CAAC;AAC5B,YAAY,GAAG,IAAI,CAAC;AACpB,YAAY,GAAG,IAAI,CAAC;AACpB,cAAc,GAAG,MAAM,CAAC;AACxB,gBAAgB,GAAG,QAAQ,CAAC;AAC5B,kBAAkB,GAAG,UAAU,CAAC;AAChC,gBAAgB,GAAG,QAAQ,CAAC;AAC5B,mBAAmB,GAAG,WAAW,CAAC;AAClC,wBAAwB,GAAG,gBAAgB,CAAC;AAC5C,yBAAyB,GAAG,iBAAiB,CAAC;AAC9C,yBAAyB,GAAG,iBAAiB,CAAC;AAC9C,iBAAiB,GAAG,SAAS,CAAC;AAC9B,oBAAoB,GAAG,YAAY,CAAC;AACpC,kBAAkB,GAAG,UAAU,CAAC;AAChC,cAAc,GAAG,MAAM,CAAC;AACxB,cAAc,GAAG,MAAM,CAAC;AACxB,gBAAgB,GAAG,QAAQ,CAAC;AAC5B,kBAAkB,GAAG,UAAU,CAAC;AAChC,oBAAoB,GAAG,YAAY,CAAC;AACpC,kBAAkB,GAAG,UAAU,CAAC;AAChC,0BAA0B,GAAG,kBAAkB,CAAC;AAChD,cAAc,GAAG,MAAM,CAAC;AACxB,GAAG,GAAG,CAAC;AACP;;;;ACnLA;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE;AAC3C,EAAE,cAAc,GAAGiC,sBAA2C,CAAC;AAC/D,CAAC,MAAM;AACP,EAAE,cAAc,GAAGC,mBAAwC,CAAC;AAC5D;;;ACFA;;;;;;;;AAOO,SAASC,eAAT,CAAyBrB,QAAzB,EAA8C;AACjD,WAASsB,KAAT,CAAeC,KAAf,EAAmD;AAAA,QAAlBC,IAAkB,uEAAJ,EAAI;AAC/C,WAAOC,QAAQ,CAACC,OAAT,CAAiBH,KAAjB,EAAwBI,MAAxB,CAA+B,UAACC,GAAD,EAAoBC,IAApB,EAA0BC,KAA1B,EAAoC;AAAA;;AACtE,UAAMC,QAAQ,GAAGP,IAAI,CAACQ,MAAL,SAAYjE,GAAG,CAAC8D,IAAD,EAAO,KAAP,CAAf,uCAAgCC,KAAhC,CAAjB;;AACA,UAAIG,kBAAU,CAACJ,IAAD,CAAd,EAAsB;AAClBD,QAAAA,GAAG,CAACM,IAAJ,OAAAN,GAAG,qBAASN,KAAK,CAACO,IAAI,CAAChC,KAAL,CAAWG,QAAZ,EAAsB+B,QAAtB,CAAd,EAAH;AACH,OAFD,MAEO,IAAII,cAAc,CAACN,IAAD,CAAlB,EAA0B;AAC7BD,QAAAA,GAAG,CAACM,IAAJ,CAASE,YAAY,CAACP,IAAD,EAAO;AAAE7E,UAAAA,GAAG,EAAE+E,QAAQ,CAACM,IAAT,CAAc,GAAd;AAAP,SAAP,CAArB;AACH,OAFM,MAEA,IAAI,OAAOR,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,QAAhD,EAA0D;AAC7DD,QAAAA,GAAG,CAACM,IAAJ,CAASL,IAAT;AACH;;AACD,aAAOD,GAAP;AACH,KAVM,EAUJ,EAVI,CAAP;AAWH;;AACD,SAAON,KAAK,CAACtB,QAAD,CAAZ;AACH;;AC4BD,IAAM/D,eAAa,GAAG,CAAC,CAAvB;;AAEA,SAASqG,eAAT,CAAyBzC,KAAzB,EAAqCrB,OAArC,EAAyE;AACrE,MAAI+D,WAAW,GAAG,KAAlB;AACA,SAAO;AACHC,IAAAA,OADG,mBACKpF,GADL,EACsB;AAAA;;AACrB,wBAAAyC,KAAK,CAAC2C,OAAN,uEAAA3C,KAAK,EAAWzC,GAAX,CAAL;;AACA,UAAI,CAACmF,WAAL,EAAkB;AACd/D,QAAAA,OAAO,CAACpB,GAAD,CAAP;AACH;AACJ,KANE;AAOHqF,IAAAA,WAPG,uBAOSrF,GAPT,EAO0B;AAAA;;AACzB,4BAAAyC,KAAK,CAAC4C,WAAN,+EAAA5C,KAAK,EAAezC,GAAf,CAAL;AACAmF,MAAAA,WAAW,GAAG,IAAd;AACH,KAVE;AAWHG,IAAAA,SAXG,qBAWOtF,GAXP,EAWwB;AAAA;;AACvB,0BAAAyC,KAAK,CAAC6C,SAAN,2EAAA7C,KAAK,EAAazC,GAAb,CAAL;AACAmF,MAAAA,WAAW,GAAG,KAAd;AACH;AAdE,GAAP;AAgBH;;AAED,IAAMI,eAAe,GAAG,SAAlBA,eAAkB,CAACd,IAAD,EAA2C;AAC/D,SAAOe,WAAW,CAAC,UAAD,CAAX,CAAwBf,IAAxB,KAAiCvC,WAAW,CAACuC,IAAI,CAAChC,KAAN,CAAnD;AACH,CAFD;AAIA;;;;;;;;AAMO,IAAMgD,kBAAsC,GAAG,SAAzCA,kBAAyC,CAACC,OAAD,EAAa;AAAA,MACvD1G,GADuD,GACN0G,OADM,CACvD1G,GADuD;AAAA,MAClDC,kBADkD,GACNyG,OADM,CAClDzG,kBADkD;AAAA,MAC9BC,mBAD8B,GACNwG,OADM,CAC9BxG,mBAD8B;AAE/D,MAAMH,KAAK,GAAGqE,OAAO,CAAC;AAAA,WAAMa,eAAe,CAACyB,OAAO,CAAC3G,KAAT,CAArB;AAAA,GAAD,EAAuC,CAAC2G,OAAO,CAAC3G,KAAT,CAAvC,CAArB;;AAF+D,kBAGjBS,QAAQ,CAACX,eAAD,CAHS;AAAA;AAAA,MAGxDY,eAHwD;AAAA,MAGvCC,kBAHuC;;;AAM/D2B,EAAAA,SAAS,CAAC,YAAM;AAAA,QACKsE,WADL,GACqB3G,GADrB,CACJuC,OADI;;AAEZ,QAAI,CAACoE,WAAL,EAAkB;AACd,aAAOnE,SAAP;AACH;AAED;;;;;;;;AAMA,QAAMoE,YAAY,GAAG,SAAfA,YAAe,CAAClB,KAAD,EAAgB9E,GAAhB,EAAwC;AACzD,cAAQA,GAAR;AACI,aAAK,WAAL;AACI,iBAAO8E,KAAK,GAAG,CAAR,GAAY3F,KAAK,CAACc,MAAlB,GAA2B6E,KAAK,GAAG,CAAnC,GAAuC,CAA9C;;AACJ,aAAK,SAAL;AACI,iBAAOA,KAAK,GAAG,CAAR,IAAa,CAAb,GAAiBA,KAAK,GAAG,CAAzB,GAA6B3F,KAAK,CAACc,MAAN,GAAe,CAAnD;;AACJ;AACI,iBAAOhB,eAAP;AANR;AAQH,KATD;AAWA;;;;;AAGA,QAAMiB,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3BJ,MAAAA,kBAAkB,CAACb,eAAD,CAAlB;AACH,KAFD;AAIA;;;;;;AAIA,QAAMsB,cAAwB,GAAG,SAA3BA,cAA2B,CAACH,GAAD,EAAS;AAAA,UAC9BJ,GAD8B,GACtBI,GADsB,CAC9BJ,GAD8B;;AAEtC,UAAIA,GAAG,KAAK,SAAR,IAAqBA,GAAG,KAAK,WAAjC,EAA8C;AAC1C;AACH;;AAED,UAAIiG,SAAS,GAAGpG,eAAhB;AACA,UAAIqG,UAAU,GAAG,CAAjB,CAPsC;;AAUtC,SAAG;AACCD,QAAAA,SAAS,GAAGD,YAAY,CAACC,SAAD,EAAYjG,GAAZ,CAAxB;AACAkG,QAAAA,UAAU,IAAI,CAAd;AACH,OAHD,QAIID,SAAS,KAAKhH,eAAd,IACAgH,SAAS,KAAKpG,eADd,IAEA,CAAC8F,eAAe,CAACxG,KAAK,CAAC8G,SAAD,CAAN,CAFhB,IAGAC,UAAU,GAAG/G,KAAK,CAACc,MAPvB;;AAUAH,MAAAA,kBAAkB,CAACmG,SAAD,CAAlB;AACA7F,MAAAA,GAAG,CAACC,cAAJ;AACAD,MAAAA,GAAG,CAACE,eAAJ;AACAhB,MAAAA,mBAAmB,SAAnB,IAAAA,mBAAmB,WAAnB,YAAAA,mBAAmB,CAAG2G,SAAH,EAAclF,GAAG,CAAC5B,KAAD,EAAQ,CAAC8G,SAAD,EAAY,KAAZ,CAAR,CAAjB,CAAnB;AACH,KAxBD;AA0BA;;;;;;AAIA,QAAME,UAAU,GAAG,SAAbA,UAAa,CAAC/F,GAAD,EAAqB;AACpC,UAAI,CAACA,GAAG,CAACgG,aAAL,IAAsB,CAACL,WAAW,CAACM,QAAZ,CAAqBjG,GAAG,CAACgG,aAAzB,CAA3B,EAA2E;AACvElG,QAAAA,gBAAgB;AACnB;AACJ,KAJD;;AAMA6F,IAAAA,WAAW,CAAClE,gBAAZ,CAA6B,UAA7B,EAAyCsE,UAAzC;AACAJ,IAAAA,WAAW,CAAClE,gBAAZ,CAA6B,SAA7B,EAAwCtB,cAAxC;AACA,WAAO,YAAM;AACTwF,MAAAA,WAAW,CAACjE,mBAAZ,CAAgC,UAAhC,EAA4CqE,UAA5C;AACAJ,MAAAA,WAAW,CAACjE,mBAAZ,CAAgC,SAAhC,EAA2CvB,cAA3C;AACH,KAHD;AAIH,GA5EQ,EA4EN,CAACnB,GAAD,EAAMS,eAAN,EAAuBV,KAAvB,EAA8BG,mBAA9B,CA5EM,CAAT;AA8EA,SAAOkE,OAAO,CAAC,YAAM;AACjB,QAAI8C,gBAAgB,GAAG,KAAvB;AACA,QAAMC,gBAAgB,GAAGpH,KAAK,CAACqH,GAAN,CAAU,UAACC,IAAD,EAAO3B,KAAP,EAAiB;AAAA;;AAChD;AACA,UAAI,CAACa,eAAe,CAACc,IAAD,CAApB,EAA4B;AACxB,eAAOA,IAAP;AACH;;AAEDH,MAAAA,gBAAgB,GAAG,IAAnB;AACA,UAAMpD,aAAa,GAAG4B,KAAK,KAAKjF,eAAhC,CAPgD;;AAUhD,aAAOuF,YAAY,CAAgBqB,IAAhB,qBACZA,IAAI,CAAC5D,KADO;AAEfK,QAAAA,aAAa,2BAAEuD,IAAI,CAAC5D,KAAL,CAAWK,aAAb,yEAA8BA,aAF5B;AAGfG,QAAAA,OAAO,EAAEqD,SAAS,CAACD,IAAI,CAAC5D,KAAL,CAAWQ,OAAZ,EAAqB,UAACsD,OAAD,EAAkB;AACrD,cAAIzD,aAAJ,EAAmB;AACfyD,YAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEC,KAAT;AACH;AACJ,SAJiB,CAHH;AAQfpE,QAAAA,cARe,0BAQApC,GARA,EAQK;AAAA;;AAChB,kDAAAqG,IAAI,CAAC5D,KAAL,EAAWL,cAAX;AACAnD,UAAAA,kBAAkB,SAAlB,IAAAA,kBAAkB,WAAlB,YAAAA,kBAAkB,CAAGyF,KAAH,EAAU2B,IAAI,CAACzG,GAAf,EAAoBI,GAApB,CAAlB;AACH;AAXc,SAYZkF,eAAe,CAACmB,IAAI,CAAC5D,KAAN,EAAa,YAAM;AACjC/C,QAAAA,kBAAkB,CAACgF,KAAD,CAAlB;AACH,OAFiB,CAZH,EAAnB;AAgBH,KA1BwB,CAAzB;AA2BA,WAAO;AAAE3F,MAAAA,KAAK,EAAEoH,gBAAT;AAA2BD,MAAAA,gBAAgB,EAAhBA;AAA3B,KAAP;AACH,GA9Ba,EA8BX,CAACnH,KAAD,EAAQU,eAAR,EAAyBR,kBAAzB,CA9BW,CAAd;AA+BH,CAnHM;;AC5EP;;;;AAuBA;;;AAGA,IAAM0C,gBAAc,GAAG,MAAvB;AAEA;;;;AAGA,IAAMC,WAAS,GAAGC,gBAAgB,CAACF,gBAAD,CAAlC;AAEA;;AACA;;;;;;;;AAOA,IAAM8E,YAA+C,GAAGjE,UAAU,CAAC,UAACC,KAAD,EAAQzD,GAAR,EAAgB;AAAA,MACvE4D,QADuE,GACkBH,KADlB,CACvEG,QADuE;AAAA,MAC7DC,SAD6D,GACkBJ,KADlB,CAC7DI,SAD6D;AAAA,MAClDX,WADkD,GACkBO,KADlB,CAClDP,WADkD;AAAA,MACrCwE,WADqC,GACkBjE,KADlB,CACrCiE,WADqC;AAAA,MACxBzH,kBADwB,GACkBwD,KADlB,CACxBxD,kBADwB;AAAA,MACDiE,cADC,4BACkBT,KADlB;;AAE/E,MAAMkE,cAAc,GAAGC,MAAM,CAAmB,IAAnB,CAA7B;;AAF+E,4BAI3CnB,kBAAkB,CAAC;AACnD1G,IAAAA,KAAK,EAAE6D,QAD4C;AAEnD5D,IAAAA,GAAG,EAAE2H,cAF8C;AAGnD1H,IAAAA,kBAAkB,EAAlBA;AAHmD,GAAD,CAJyB;AAAA,MAIvEF,KAJuE,uBAIvEA,KAJuE;AAAA,MAIhEmH,gBAJgE,uBAIhEA,gBAJgE;;AAS/E,MAAMW,SAAS,GAAGX,gBAAgB,IAAIhE,WAAtC;AAEA,SACI,uCACQgB,cADR;AAEI,IAAA,SAAS,EAAEI,UAAU,CACjBT,SADiB,EAEjBU,kBAAkB,CAAC;AACfC,MAAAA,MAAM,EAAE5B,WADO;AAEf8E,MAAAA,WAAW,EAAEA,WAAF,aAAEA,WAAF,cAAEA,WAAF,GAAkBG,SAAS,GAAG7E,IAAI,CAAC8E,GAAR,GAActF;AAFrC,KAAD,CAFD,CAFzB;AASI,IAAA,QAAQ,EAAEqF,SAAS,GAAG,CAAH,GAAO,CAAC,CAT/B;AAUI,IAAA,GAAG,EAAEP,SAAS,CAACtH,GAAD,EAAM2H,cAAN;AAVlB,MAYK5H,KAZL,CADJ;AAgBH,CA3BiE,CAAlE;AA4BA0H,YAAY,CAAC5C,WAAb,GAA2BlC,gBAA3B;AACA8E,YAAY,CAAC5D,SAAb,GAAyBjB,WAAzB;IAEamF,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAcR,YAAd,EAA4B;AAAE3H,EAAAA,yBAAyB,EAAzBA;AAAF,CAA5B;;;;"}