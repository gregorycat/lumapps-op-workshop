{"version":3,"file":"Mosaic2.js","sources":["../../../src/components/mosaic/Mosaic.tsx"],"sourcesContent":["import React, { forwardRef, MouseEventHandler, useMemo } from 'react';\n\nimport { Alignment, AspectRatio, Theme, Thumbnail, ThumbnailProps } from '@lumx/react';\nimport { Comp, GenericProps, getRootClassName, handleBasicClasses } from '@lumx/react/utils';\nimport classNames from 'classnames';\nimport take from 'lodash/take';\n\n/**\n * Defines the props of the component.\n */\nexport interface MosaicProps extends GenericProps {\n    /** Theme adapting the component to light or dark background. */\n    theme?: Theme;\n    /** Thumbnails. */\n    thumbnails: ThumbnailProps[];\n    /** On image click callback. */\n    onImageClick?(index: number): void;\n}\n\n/**\n * Component display name.\n */\nconst COMPONENT_NAME = 'Mosaic';\n\n/**\n * Component default class name and class prefix.\n */\nconst CLASSNAME = getRootClassName(COMPONENT_NAME);\n\n/**\n * Component default props.\n */\nconst DEFAULT_PROPS: Partial<MosaicProps> = {\n    theme: Theme.light,\n};\n\n/**\n * Mosaic component.\n *\n * @param  props Component props.\n * @param  ref   Component ref.\n * @return React element.\n */\nexport const Mosaic: Comp<MosaicProps, HTMLDivElement> = forwardRef((props, ref) => {\n    const { className, theme, thumbnails, onImageClick, ...forwardedProps } = props;\n    const handleImageClick = useMemo(() => {\n        if (!onImageClick) return undefined;\n\n        return (index: number, onClick?: MouseEventHandler): MouseEventHandler => (event) => {\n            onClick?.(event);\n            onImageClick?.(index);\n        };\n    }, [onImageClick]);\n\n    return (\n        <div\n            ref={ref}\n            {...forwardedProps}\n            className={classNames(className, handleBasicClasses({ prefix: CLASSNAME, theme }), {\n                [`${CLASSNAME}--has-1-thumbnail`]: thumbnails?.length === 1,\n                [`${CLASSNAME}--has-2-thumbnails`]: thumbnails?.length === 2,\n                [`${CLASSNAME}--has-3-thumbnails`]: thumbnails?.length === 3,\n                [`${CLASSNAME}--has-4-thumbnails`]: thumbnails?.length >= 4,\n            })}\n        >\n            <div className={`${CLASSNAME}__wrapper`}>\n                {take(thumbnails, 4).map((thumbnail: any, index: number) => {\n                    const { image, onClick, align, ...thumbnailProps } = thumbnail;\n\n                    return (\n                        <div key={index} className={`${CLASSNAME}__thumbnail`}>\n                            <Thumbnail\n                                {...thumbnailProps}\n                                align={align || Alignment.left}\n                                image={image}\n                                theme={theme}\n                                aspectRatio={AspectRatio.free}\n                                fillHeight\n                                onClick={handleImageClick?.(index, onClick) || onClick}\n                            />\n\n                            {thumbnails.length > 4 && index === 3 && (\n                                <div className={`${CLASSNAME}__overlay`}>\n                                    <span>+{thumbnails.length - 4}</span>\n                                </div>\n                            )}\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n});\nMosaic.displayName = COMPONENT_NAME;\nMosaic.className = CLASSNAME;\nMosaic.defaultProps = DEFAULT_PROPS;\n"],"names":["COMPONENT_NAME","CLASSNAME","getRootClassName","DEFAULT_PROPS","theme","Theme","light","Mosaic","forwardRef","props","ref","className","thumbnails","onImageClick","forwardedProps","handleImageClick","useMemo","undefined","index","onClick","event","classNames","handleBasicClasses","prefix","length","take","map","thumbnail","image","align","thumbnailProps","Alignment","left","AspectRatio","free","displayName","defaultProps"],"mappings":"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"}