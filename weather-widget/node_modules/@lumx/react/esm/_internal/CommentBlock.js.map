{"version":3,"file":"CommentBlock.js","sources":["../../../src/components/comment-block/CommentBlock.tsx"],"sourcesContent":["import React, { Children, forwardRef, KeyboardEvent, KeyboardEventHandler, ReactNode } from 'react';\n\nimport classNames from 'classnames';\n\nimport { Avatar, Size, Theme } from '@lumx/react';\nimport { Comp, GenericProps, getRootClassName, handleBasicClasses, ValueOf } from '@lumx/react/utils';\n\nimport isFunction from 'lodash/isFunction';\nimport { AvatarProps } from '../avatar/Avatar';\n\n/**\n * Comment block variants.\n */\nexport const CommentBlockVariant = {\n    indented: 'indented',\n    linear: 'linear',\n} as const;\nexport type CommentBlockVariant = ValueOf<typeof CommentBlockVariant>;\n\n/**\n * Defines the props of the component.\n */\nexport interface CommentBlockProps extends GenericProps {\n    /** Action toolbar content. */\n    actions?: ReactNode;\n    /** Props to pass to the avatar. */\n    avatarProps: AvatarProps;\n    /** Comment block replies. */\n    children?: ReactNode;\n    /** Comment date. */\n    date: string;\n    /** Whether the component has actions to display or not. */\n    hasActions?: boolean;\n    /** Action toolbar header content. */\n    headerActions?: ReactNode;\n    /** Whether the component is open or not. */\n    isOpen?: boolean;\n    /** Whether the comment is relevant or not. */\n    isRelevant?: boolean;\n    /** Comment author name. */\n    name: string;\n    /** On click callback. */\n    onClick?(): void;\n    /** On mouse enter callback. */\n    onMouseEnter?(): void;\n    /** On mouse leave callback. */\n    onMouseLeave?(): void;\n    /** Comment content. */\n    text: ReactNode | string;\n    /** Theme adapting the component to light or dark background. */\n    theme?: Theme;\n    /** Comment variant. */\n    variant?: CommentBlockVariant;\n}\n\n/**\n * Component display name.\n */\nconst COMPONENT_NAME = 'CommentBlock';\n\n/**\n * Component default class name and class prefix.\n */\nconst CLASSNAME = getRootClassName(COMPONENT_NAME);\n\n/**\n * Component default props.\n */\nconst DEFAULT_PROPS: Partial<CommentBlockProps> = {\n    theme: Theme.light,\n    variant: CommentBlockVariant.indented,\n};\n\n/**\n * CommentBlock component.\n *\n * @param  props Component props.\n * @param  ref   Component ref.\n * @return React element.\n */\nexport const CommentBlock: Comp<CommentBlockProps, HTMLDivElement> = forwardRef((props, ref) => {\n    const {\n        actions,\n        avatarProps,\n        children,\n        className,\n        date,\n        hasActions,\n        headerActions,\n        isOpen,\n        isRelevant,\n        name,\n        onClick,\n        onMouseEnter,\n        onMouseLeave,\n        text,\n        theme,\n        variant,\n        ...forwardedProps\n    } = props;\n    const enterKeyPress: KeyboardEventHandler<HTMLElement> = (evt: KeyboardEvent<HTMLElement>) => {\n        if (evt.key === 'Enter' && isFunction(onClick)) {\n            onClick();\n        }\n    };\n    const hasChildren = Children.count(children) > 0;\n\n    return (\n        <div\n            ref={ref}\n            className={classNames(\n                className,\n                handleBasicClasses({\n                    hasChildren: hasChildren && isOpen,\n                    hasIndentedChildren: hasChildren && variant === CommentBlockVariant.indented,\n                    hasLinearChildren: hasChildren && variant === CommentBlockVariant.linear,\n                    isRelevant,\n                    prefix: CLASSNAME,\n                    theme,\n                }),\n            )}\n            {...forwardedProps}\n        >\n            <div className={`${CLASSNAME}__wrapper`}>\n                <div className={`${CLASSNAME}__avatar`}>\n                    <Avatar\n                        {...avatarProps}\n                        size={Size.m}\n                        tabIndex={onClick ? 0 : -1}\n                        onClick={onClick}\n                        onKeyPress={enterKeyPress}\n                    />\n                </div>\n\n                <div className={`${CLASSNAME}__container`}>\n                    <div className={`${CLASSNAME}__content`}>\n                        <div className={`${CLASSNAME}__meta`}>\n                            <span\n                                className={`${CLASSNAME}__name`}\n                                onClick={onClick}\n                                onKeyPress={enterKeyPress}\n                                onMouseEnter={onMouseEnter}\n                                onMouseLeave={onMouseLeave}\n                                role=\"button\"\n                                tabIndex={onClick ? 0 : -1}\n                            >\n                                {name}\n                            </span>\n                            {date && <span className={`${CLASSNAME}__date`}>{date}</span>}\n                            {headerActions && <span className={`${CLASSNAME}__header-actions`}>{headerActions}</span>}\n                        </div>\n\n                        <div className={`${CLASSNAME}__text`}>{text}</div>\n                    </div>\n                    {hasActions && <div className={`${CLASSNAME}__actions`}>{actions}</div>}\n                </div>\n            </div>\n\n            {hasChildren && isOpen && <div className={`${CLASSNAME}__children`}>{children}</div>}\n        </div>\n    );\n});\nCommentBlock.displayName = COMPONENT_NAME;\nCommentBlock.className = CLASSNAME;\nCommentBlock.defaultProps = DEFAULT_PROPS;\n"],"names":["CommentBlockVariant","indented","linear","COMPONENT_NAME","CLASSNAME","getRootClassName","DEFAULT_PROPS","theme","Theme","light","variant","CommentBlock","forwardRef","props","ref","actions","avatarProps","children","className","date","hasActions","headerActions","isOpen","isRelevant","name","onClick","onMouseEnter","onMouseLeave","text","forwardedProps","enterKeyPress","evt","key","isFunction","hasChildren","Children","count","classNames","handleBasicClasses","hasIndentedChildren","hasLinearChildren","prefix","Size","m","displayName","defaultProps"],"mappings":"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"}