{"version":3,"file":"useDelayedVisibility.js","sources":["../../../src/hooks/useDelayedVisibility.tsx"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\n\n/**\n * Returns true if the component is visible taking into account the component's\n * own visibility and the animations delay\n *\n * @param isComponentVisible Whether the component intends to be visible or not.\n * @param transitionDuration time in ms that the transition takes for the specific component.\n * @param onVisibilityChange Callback called when the visibility changes.\n * @return true if the component should be rendered\n */\nexport function useDelayedVisibility(\n    isComponentVisible: boolean,\n    transitionDuration: number,\n    onVisibilityChange?: (isVisible: boolean) => void,\n): boolean {\n    // Delay visibility to account for the 400ms of CSS opacity animation.\n    const [isVisible, setVisible] = useState(isComponentVisible);\n\n    useEffect(() => {\n        if (isComponentVisible) {\n            setVisible(true);\n        } else {\n            setTimeout(() => setVisible(false), transitionDuration);\n        }\n    }, [isComponentVisible, transitionDuration]);\n\n    /**\n     * Since we don't want onVisibiltyChange function to trigger itself if when it changes,\n     * we store the previous visibility and only trigger when visibility is different\n     * than previous value.\n     */\n\n    const previousVisibility = useRef(isVisible);\n\n    useEffect(() => {\n        if (onVisibilityChange && previousVisibility.current !== isVisible) {\n            onVisibilityChange(isVisible);\n            previousVisibility.current = isVisible;\n        }\n    }, [isVisible, onVisibilityChange]);\n\n    return isComponentVisible || isVisible;\n}\n"],"names":["useDelayedVisibility","isComponentVisible","transitionDuration","onVisibilityChange","useState","isVisible","setVisible","useEffect","setTimeout","previousVisibility","useRef","current"],"mappings":";;;AAEA;;;;;;;;;;AASO,SAASA,oBAAT,CACHC,kBADG,EAEHC,kBAFG,EAGHC,kBAHG,EAII;AACP;AADO,kBAEyBC,QAAQ,CAACH,kBAAD,CAFjC;AAAA;AAAA,MAEAI,SAFA;AAAA,MAEWC,UAFX;;AAIPC,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIN,kBAAJ,EAAwB;AACpBK,MAAAA,UAAU,CAAC,IAAD,CAAV;AACH,KAFD,MAEO;AACHE,MAAAA,UAAU,CAAC;AAAA,eAAMF,UAAU,CAAC,KAAD,CAAhB;AAAA,OAAD,EAA0BJ,kBAA1B,CAAV;AACH;AACJ,GANQ,EAMN,CAACD,kBAAD,EAAqBC,kBAArB,CANM,CAAT;AAQA;;;;;;AAMA,MAAMO,kBAAkB,GAAGC,MAAM,CAACL,SAAD,CAAjC;AAEAE,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIJ,kBAAkB,IAAIM,kBAAkB,CAACE,OAAnB,KAA+BN,SAAzD,EAAoE;AAChEF,MAAAA,kBAAkB,CAACE,SAAD,CAAlB;AACAI,MAAAA,kBAAkB,CAACE,OAAnB,GAA6BN,SAA7B;AACH;AACJ,GALQ,EAKN,CAACA,SAAD,EAAYF,kBAAZ,CALM,CAAT;AAOA,SAAOF,kBAAkB,IAAII,SAA7B;AACH;;;;"}